"use strict";(self.webpackChunkreifydb_docs=self.webpackChunkreifydb_docs||[]).push([[885,6158],{885:(e,t,n)=>{n.r(t),n.d(t,{default:()=>N});var r=n(9729),s=n(7147),a=n(6158),o=n(2153);const i={schemaExplorer:"schemaExplorer_Jl2v",header:"header_ekv0",tableList:"tableList_yhKm",emptyState:"emptyState_QL5l",table:"table_iJw6",tableHeader:"tableHeader_HsV6",expandIcon:"expandIcon_ICVr",tableName:"tableName_XF_s",rowCount:"rowCount_Taah",columnList:"columnList_KeW5",column:"column_CfY8",columnName:"columnName_BKPX",columnType:"columnType_b7Em"};var l=n(5813);function c({schema:e,onTableClick:t}){const[n,s]=(0,r.useState)(new Set);return(0,l.jsxs)("div",{className:i.schemaExplorer,children:[(0,l.jsx)("div",{className:i.header,children:(0,l.jsx)("h3",{children:"Database Schema"})}),(0,l.jsx)("div",{className:i.tableList,children:0===e.length?(0,l.jsx)("div",{className:i.emptyState,children:"No tables found"}):e.map(e=>(0,l.jsxs)("div",{className:i.table,children:[(0,l.jsxs)("div",{className:i.tableHeader,onClick:()=>(e=>{const t=new Set(n);t.has(e)?t.delete(e):t.add(e),s(t)})(e.name),children:[(0,l.jsx)("span",{className:i.expandIcon,children:n.has(e.name)?"\u25bc":"\u25b6"}),(0,l.jsx)("span",{className:i.tableName,onClick:n=>{n.stopPropagation(),t?.(e.name)},children:e.name}),void 0!==e.rowCount&&(0,l.jsxs)("span",{className:i.rowCount,children:[e.rowCount," rows"]})]}),n.has(e.name)&&(0,l.jsx)("div",{className:i.columnList,children:e.columns.map((e,t)=>(0,l.jsxs)("div",{className:i.column,children:[(0,l.jsx)("span",{className:i.columnName,children:e.name}),(0,l.jsxs)("span",{className:i.columnType,children:[e.dataType,!e.nullable&&" NOT NULL"]})]},t))})]},e.name))})]})}const u={historyContainer:"historyContainer_IJJ5",emptyState:"emptyState_QwkD",hint:"hint_SF07",historyItem:"historyItem_nf9Q",error:"error_Wdh_",queryHeader:"queryHeader_O2jQ",timestamp:"timestamp_s878",executionTime:"executionTime_rEbc",errorBadge:"errorBadge_UxQc",queryText:"queryText_htsn",errorMessage:"errorMessage_IikX"};function d({history:e,onQuerySelect:t}){const n=(e,t=100)=>{const n=e.replace(/\s+/g," ").trim();return n.length<=t?n:n.substring(0,t)+"..."};return 0===e.length?(0,l.jsxs)("div",{className:u.emptyState,children:[(0,l.jsx)("p",{children:"No query history yet"}),(0,l.jsx)("p",{className:u.hint,children:"Executed queries will appear here"})]}):(0,l.jsx)("div",{className:u.historyContainer,children:e.slice().reverse().map(e=>{return(0,l.jsxs)("div",{className:`${u.historyItem} ${e.success?"":u.error}`,onClick:()=>t?.(e.query),children:[(0,l.jsxs)("div",{className:u.queryHeader,children:[(0,l.jsx)("span",{className:u.timestamp,children:(r=e.timestamp,new Date(r).toLocaleTimeString())}),(0,l.jsxs)("span",{className:u.executionTime,children:[e.executionTimeMs,"ms"]}),!e.success&&(0,l.jsx)("span",{className:u.errorBadge,children:"Error"})]}),(0,l.jsx)("div",{className:u.queryText,children:n(e.query)}),e.error&&(0,l.jsx)("div",{className:u.errorMessage,children:e.error})]},e.id);var r})})}const m={toolbar:"toolbar_pWSb",toolbarLeft:"toolbarLeft_gm_C",toolbarRight:"toolbarRight_BmRO",button:"button_LAEY",primaryButton:"primaryButton_KOR3",dropdown:"dropdown_exhf",dropdownMenu:"dropdownMenu__zex",dropdownItem:"dropdownItem_R6Ol",connectionStatus:"connectionStatus_z2sX",statusDot:"statusDot_Easn",connected:"connected_GAy8",disconnected:"disconnected_zQog"},h=[{id:"basic-select",name:"Basic SELECT",query:"SELECT * FROM users LIMIT 10;"},{id:"join",name:"JOIN Example",query:"SELECT u.name, p.title FROM users u JOIN posts p ON u.id = p.user_id;"},{id:"aggregate",name:"Aggregation",query:"SELECT user_id, COUNT(*) as post_count FROM posts GROUP BY user_id;"},{id:"insert",name:"INSERT Data",query:"INSERT INTO users (name, email) VALUES ('New User', 'new@example.com');"},{id:"update",name:"UPDATE Data",query:"UPDATE posts SET published = true WHERE title LIKE '%ReifyDB%';"}];function b({connected:e,isExecuting:t,onExecute:n,onReset:s,onLoadExample:a}){const[o,i]=(0,r.useState)(!1);return(0,l.jsxs)("div",{className:m.toolbar,children:[(0,l.jsxs)("div",{className:m.toolbarLeft,children:[(0,l.jsx)("button",{className:`${m.button} ${m.primaryButton}`,onClick:n,disabled:!e||t,children:t?"Executing...":"Run Query"}),(0,l.jsxs)("div",{className:m.dropdown,children:[(0,l.jsx)("button",{className:m.button,onClick:()=>i(!o),children:"Examples \u25bc"}),o&&(0,l.jsx)("div",{className:m.dropdownMenu,children:h.map(e=>(0,l.jsx)("button",{className:m.dropdownItem,onClick:()=>{a(e.query),i(!1)},children:e.name},e.id))})]}),(0,l.jsx)("button",{className:m.button,onClick:s,disabled:!e,children:"Reset Database"})]}),(0,l.jsx)("div",{className:m.toolbarRight,children:(0,l.jsxs)("div",{className:m.connectionStatus,children:[(0,l.jsx)("span",{className:`${m.statusDot} ${e?m.connected:m.disconnected}`}),(0,l.jsx)("span",{children:e?"Connected":"Disconnected"})]})})]})}var g=n(7566),x=n(3856),p=n(3687);const y=[{name:"users",columns:[{name:"id",dataType:"INTEGER",nullable:!1},{name:"name",dataType:"TEXT",nullable:!1},{name:"email",dataType:"TEXT",nullable:!0},{name:"created_at",dataType:"TIMESTAMP",nullable:!0}],indexes:["PRIMARY KEY (id)","UNIQUE (email)"],rowCount:3},{name:"posts",columns:[{name:"id",dataType:"INTEGER",nullable:!1},{name:"user_id",dataType:"INTEGER",nullable:!0},{name:"title",dataType:"TEXT",nullable:!1},{name:"content",dataType:"TEXT",nullable:!0},{name:"published",dataType:"BOOLEAN",nullable:!0},{name:"created_at",dataType:"TIMESTAMP",nullable:!0}],indexes:["PRIMARY KEY (id)","FOREIGN KEY (user_id) REFERENCES users(id)"],rowCount:4}],E=[[1,"Alice Johnson","alice@example.com","2024-01-15 10:30:00"],[2,"Bob Smith","bob@example.com","2024-01-16 14:20:00"],[3,"Charlie Brown","charlie@example.com","2024-01-17 09:15:00"]],f=[[1,1,"Getting Started with ReifyDB","ReifyDB is a modern database...",!0,"2024-01-20 11:00:00"],[2,1,"Advanced Query Optimization","In this post we explore...",!0,"2024-01-22 15:30:00"],[3,2,"Building Real-time Apps","Learn how to build...",!0,"2024-01-23 10:45:00"],[4,3,"Draft Post","This is a work in progress...",!1,"2024-01-24 16:20:00"]];const C={playground:"playground_eFU1",content:"content_XQsO",resizeHandle:"resizeHandle_YQ6i",resultPanel:"resultPanel_Yi9C",tabs:"tabs_BACI",tab:"tab_lw1M",active:"active_HyYE",tabContent:"tabContent_zlnj"},T="-- Welcome to ReifyDB Playground!\n-- Try running this query:\nSELECT * FROM users LIMIT 10;";function N(){const[e,t]=(0,r.useState)(T),[n,i]=(0,r.useState)(!1),[u,m]=(0,r.useState)("result"),[h,N]=(0,r.useState)("vs"),_=(0,r.useRef)(null),{connected:S,result:j,error:w,schema:R,history:k,executeQuery:v,resetDatabase:A,loadExample:I}=function(){const{client:e,isConnected:t,isConnecting:n,connectionError:s,connect:a,disconnect:o,reconnect:i}=(0,g.w)(),{isExecuting:l,result:c,error:u,executionTime:d,history:m,executeQuery:h,clearResults:b,clearHistory:C}=(0,x.I)(e,{addToHistory:!0}),[T,N]=(0,r.useState)(y),_=(0,r.useCallback)(async e=>{if(!t){const t=e.toLowerCase().trim();if(t.includes("from users"))return{columns:[{name:"id",ty:"Int4",data:[]},{name:"name",ty:"Utf8",data:[]},{name:"email",ty:"Utf8",data:[]},{name:"created_at",ty:"DateTime",data:[]}],rows:E.map(e=>({id:new p.f0(e[0]),name:new p.D_(e[1]),email:new p.D_(e[2]),created_at:new p.Z4(e[3])})),executionTimeMs:100};if(t.includes("from posts"))return{columns:[{name:"id",ty:"Int4",data:[]},{name:"user_id",ty:"Int4",data:[]},{name:"title",ty:"Utf8",data:[]},{name:"content",ty:"Utf8",data:[]},{name:"published",ty:"Bool",data:[]},{name:"created_at",ty:"DateTime",data:[]}],rows:f.map(e=>({id:new p.f0(e[0]),user_id:new p.f0(e[1]),title:new p.D_(e[2]),content:new p.D_(e[3]),published:new p._t(e[4]),created_at:new p.Z4(e[5])})),executionTimeMs:100}}return await h(e)},[t,h]),S=(0,r.useCallback)(()=>{b(),C(),N(y)},[b,C]),j=(0,r.useCallback)(e=>e,[]),w=(0,r.useCallback)(async()=>{if(e&&t)try{N(y)}catch(n){console.error("Failed to fetch schema:",n),N(y)}},[e,t]);return{connected:t,isConnecting:n,connectionError:s,result:c,error:u,schema:T,history:m,executeQuery:_,resetDatabase:S,loadExample:j,connect:a,disconnect:o,reconnect:i,fetchSchema:w}}(),L=(0,r.useCallback)(async()=>{if(e.trim()&&!n){i(!0),m("result");try{await v(e)}finally{i(!1)}}},[e,n,v]);(0,r.useEffect)(()=>{const e=()=>{const e=document.documentElement.getAttribute("data-theme");N("dark"===e?"vs-dark":"vs")};e();const t=new MutationObserver(e);return t.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),()=>t.disconnect()},[]);const F=(0,r.useCallback)(e=>{t(e),_.current&&_.current.setValue(e)},[]);return(0,l.jsxs)("div",{className:C.playground,children:[(0,l.jsx)(b,{connected:S,isExecuting:n,onExecute:L,onReset:A,onLoadExample:I}),(0,l.jsx)("div",{className:C.content,children:(0,l.jsxs)(s.YZ,{direction:"horizontal",children:[(0,l.jsx)(s.Zk,{defaultSize:20,minSize:15,maxSize:30,children:(0,l.jsx)(c,{schema:R,onTableClick:e=>{t(`SELECT * FROM ${e} LIMIT 10;`)}})}),(0,l.jsx)(s.TW,{className:C.resizeHandle}),(0,l.jsx)(s.Zk,{defaultSize:80,children:(0,l.jsxs)(s.YZ,{direction:"vertical",children:[(0,l.jsx)(s.Zk,{defaultSize:40,minSize:20,children:(0,l.jsx)(a.default,{ref:_,value:e,onChange:t,onExecute:L,language:"sql",theme:h})}),(0,l.jsx)(s.TW,{className:C.resizeHandle}),(0,l.jsx)(s.Zk,{defaultSize:60,minSize:20,children:(0,l.jsxs)("div",{className:C.resultPanel,children:[(0,l.jsxs)("div",{className:C.tabs,children:[(0,l.jsx)("button",{className:`${C.tab} ${"result"===u?C.active:""}`,onClick:()=>m("result"),children:"Result"}),(0,l.jsx)("button",{className:`${C.tab} ${"history"===u?C.active:""}`,onClick:()=>m("history"),children:"History"})]}),(0,l.jsx)("div",{className:C.tabContent,children:"result"===u?(0,l.jsx)(o.A,{result:j,error:w,isLoading:n}):(0,l.jsx)(d,{history:k,onQuerySelect:F})})]})})]})})]})})]})}},1090:(e,t,n)=>{n.d(t,{R:()=>r});const r={DEFAULT_WS_URL:"ws://127.0.0.1:8090",CONNECTION:{TIMEOUT_MS:1e4,RECONNECT_INTERVAL_MS:5e3,MAX_RECONNECT_ATTEMPTS:3},QUERY:{MAX_HISTORY_SIZE:100,DEFAULT_EXECUTION_TIMEOUT:3e4},DOCKER_COMMAND:"docker run -p 127.0.0.1:8090:8090 reifydb/testcontainer",getWebSocketUrl(){if("undefined"!=typeof window){const e=window.REIFYDB_WS_URL;if(e)return e;if("localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname)return`wss://${window.location.hostname}/ws`}return this.DEFAULT_WS_URL}}},2153:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(9729);const s={brutalistContainer:"brutalistContainer_APvi",loadingBox:"loadingBox_aZTp",loadingSpinner:"loadingSpinner_cU7F",spin:"spin_S0yu",loadingText:"loadingText_uANT",errorBox:"errorBox_CVh4",errorHeader:"errorHeader_wshI",errorLabel:"errorLabel__alV",errorMessage:"errorMessage_E7e2",emptyBox:"emptyBox_snBC",emptyText:"emptyText_zCsI",emptyHint:"emptyHint_veDV",resultHeader:"resultHeader_TJTA",statsBox:"statsBox_DGe5",statItem:"statItem_FUB2",brutalistButton:"brutalistButton_Um01",tableContainer:"tableContainer_psY8",brutalistTable:"brutalistTable_XbYV",indexHeader:"indexHeader_nZP1",columnHeader:"columnHeader_jU89",headerContent:"headerContent_OWGD",columnName:"columnName_vxjW",columnType:"columnType_Q4Da",sortArrow:"sortArrow_rbdO",dataRow:"dataRow_Yuq2",indexCell:"indexCell_kfvR",dataCell:"dataCell_ETmi",cellValue:"cellValue_Ndje",nullValue:"nullValue_dF2x",boolValue:"boolValue_CCaZ",true:"true_LAGZ",false:"false_NP6X",jsonValue:"jsonValue_ULIV","type-number":"type-number_yLB8","type-date":"type-date_kesV","type-blob":"type-blob_ykgX",noDataCell:"noDataCell_YmTR",noDataBox:"noDataBox_aMLA",noDataHint:"noDataHint_yKui"};var a=n(5813);function o({result:e,error:t,isLoading:n}){const[o,i]=(0,r.useState)(null),[l,c]=(0,r.useState)("asc"),u=(0,r.useCallback)(e=>{if(void 0===e)return"NULL";const t=e.valueOf();if(null==t)return"NULL";if(!0===t)return"TRUE";if(!1===t)return"FALSE";if("bigint"==typeof t)return t.toString();if(t instanceof Date)return t.toISOString().replace("T"," ").substring(0,19);if(t instanceof Uint8Array){const e=Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("");return"0x"+(e.length>16?e.substring(0,16)+"...":e)}return String(t)},[]),d=(0,r.useCallback)(e=>{if(void 0===e)return"null";const t=e.valueOf();if(null==t)return"null";if("boolean"==typeof t)return"boolean";if("bigint"==typeof t||"number"==typeof t)return"number";if(t instanceof Date)return"date";if(t instanceof Uint8Array)return"blob";if("string"==typeof t){if(t.startsWith("{")&&t.endsWith("}")||t.startsWith("[")&&t.endsWith("]"))try{return JSON.parse(t),"json"}catch{return"string"}return"string"}return"unknown"},[]),m=(0,r.useCallback)(e=>{o===e?c("asc"===l?"desc":"asc"):(i(e),c("asc"))},[o,l]),h=(0,r.useMemo)(()=>e&&o&&0!==e.rows.length?[...e.rows].sort((e,t)=>{const n=e[o]?.valueOf(),r=t[o]?.valueOf();if(null==n)return 1;if(null==r)return-1;let s=0;return n<r&&(s=-1),n>r&&(s=1),"asc"===l?s:-s}):e?.rows||[],[e,o,l]),b=(0,r.useCallback)(()=>{if(!e)return;const t=[e.columns.map(e=>e.name).join(","),...e.rows.map(t=>e.columns.map(e=>{const n=u(t[e.name]);return n.includes(",")?`"${n}"`:n}).join(","))].join("\n"),n=new Blob([t],{type:"text/csv"}),r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=`query-results-${Date.now()}.csv`,s.click(),URL.revokeObjectURL(r)},[e,u]);return n?(0,a.jsx)("div",{className:s.brutalistContainer,children:(0,a.jsxs)("div",{className:s.loadingBox,children:[(0,a.jsx)("div",{className:s.loadingSpinner}),(0,a.jsx)("span",{className:s.loadingText,children:"EXECUTING QUERY"})]})}):t?(0,a.jsx)("div",{className:s.brutalistContainer,children:(0,a.jsxs)("div",{className:s.errorBox,children:[(0,a.jsx)("div",{className:s.errorHeader,children:(0,a.jsx)("span",{className:s.errorLabel,children:"ERROR"})}),(0,a.jsx)("pre",{className:s.errorMessage,children:t})]})}):e?(0,a.jsx)("div",{className:s.brutalistContainer,children:(0,a.jsxs)("div",{className:s.tableContainer,children:[(0,a.jsxs)("table",{className:s.brutalistTable,children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:s.indexHeader,children:"#"}),e.columns.map((e,t)=>(0,a.jsx)("th",{className:s.columnHeader,onClick:()=>m(e.name),children:(0,a.jsxs)("div",{className:s.headerContent,children:[(0,a.jsx)("span",{className:s.columnName,children:e.name}),(0,a.jsx)("span",{className:s.columnType,children:e.ty}),o===e.name&&(0,a.jsx)("span",{className:s.sortArrow,children:"asc"===l?"\u25b2":"\u25bc"})]})},t))]})}),(0,a.jsx)("tbody",{children:h.length>0?h.map((t,n)=>(0,a.jsxs)("tr",{className:s.dataRow,children:[(0,a.jsx)("td",{className:s.indexCell,children:n+1}),e.columns.map((e,n)=>{const r=t[e.name],o=u(r),i=d(r);return(0,a.jsx)("td",{className:`${s.dataCell} ${s[`type-${i}`]}`,children:"null"===i?(0,a.jsx)("span",{className:s.nullValue,children:"NULL"}):"boolean"===i?(0,a.jsx)("span",{className:`${s.boolValue} ${"TRUE"===o?s.true:s.false}`,children:o}):"json"===i?(0,a.jsx)("code",{className:s.jsonValue,children:o.length>50?o.substring(0,50)+"...":o}):(0,a.jsx)("span",{className:s.cellValue,children:o})},n)})]},n)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:e.columns.length+1,className:s.noDataCell,children:(0,a.jsxs)("div",{className:s.noDataBox,children:[(0,a.jsx)("span",{children:"QUERY EXECUTED SUCCESSFULLY"}),(0,a.jsx)("span",{className:s.noDataHint,children:"NO ROWS RETURNED"})]})})})})]}),(0,a.jsxs)("div",{className:s.resultHeader,children:[(0,a.jsxs)("div",{className:s.statsBox,children:[(0,a.jsxs)("span",{className:s.statItem,children:["ROWS: ",(0,a.jsx)("strong",{children:e.rows.length})]}),void 0!==e.rowsAffected&&(0,a.jsxs)("span",{className:s.statItem,children:["AFFECTED: ",(0,a.jsx)("strong",{children:e.rowsAffected})]})]}),(0,a.jsx)("button",{className:s.brutalistButton,onClick:b,children:"EXPORT CSV"})]})]})}):(0,a.jsx)("div",{className:s.brutalistContainer,children:(0,a.jsxs)("div",{className:s.emptyBox,children:[(0,a.jsx)("span",{className:s.emptyText,children:"NO RESULTS"}),(0,a.jsx)("span",{className:s.emptyHint,children:"EXECUTE A QUERY TO SEE RESULTS"})]})})}},3856:(e,t,n)=>{n.d(t,{I:()=>s});var r=n(9729);function s(e,t={}){const[n,s]=(0,r.useState)({isExecuting:!1,result:null,error:null,executionTime:null}),[a,o]=(0,r.useState)([]),i=(0,r.useRef)(null),l=(0,r.useCallback)(async n=>{if(!e){const e="No connection to ReifyDB server";return t.onError?.(e),null}if(!n.trim()){const e="Query cannot be empty";return t.onError?.(e),null}i.current&&i.current.abort(),i.current=new AbortController,s({isExecuting:!0,result:null,error:null,executionTime:null});const r=Date.now();try{const a=await e.query(n,null,[]),i=Date.now()-r;let l;const c=a?.[0];if(Array.isArray(c)&&c.length>0){const e=c[0],t=Object.keys(e).map(t=>{const n=e[t];return{name:t,ty:n?.type||"Utf8",data:[]}});l={columns:t,rows:c,executionTimeMs:i}}else l={columns:[],rows:[],executionTimeMs:i};if(s({isExecuting:!1,result:l,error:null,executionTime:i}),!1!==t.addToHistory){const e={id:Date.now().toString(),query:n,timestamp:Date.now(),executionTimeMs:i,success:!0};o(t=>[e,...t].slice(0,100))}return t.onSuccess?.(l),l}catch(a){const e=Date.now()-r;let i="Query execution failed";if(a instanceof Error?i=a.message:"string"==typeof a?i=a:a&&"object"==typeof a&&"message"in a&&(i=a.message),s({isExecuting:!1,result:null,error:i,executionTime:e}),!1!==t.addToHistory){const t={id:Date.now().toString(),query:n,timestamp:Date.now(),executionTimeMs:e,success:!1,error:i};o(e=>[t,...e].slice(0,100))}return t.onError?.(i),null}finally{i.current=null}},[e,t]),c=(0,r.useCallback)(()=>{s({isExecuting:!1,result:null,error:null,executionTime:null})},[]),u=(0,r.useCallback)(()=>{o([])},[]),d=(0,r.useCallback)(()=>{i.current&&(i.current.abort(),s(e=>({...e,isExecuting:!1,error:"Query cancelled"})))},[]);return{isExecuting:n.isExecuting,result:n.result,error:n.error,executionTime:n.executionTime,history:a,executeQuery:l,clearResults:c,clearHistory:u,cancelQuery:d}}},6158:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var r=n(9729),s=n(8655);const a="brutalistEditorContainer_zuLD";var o=n(5813);const i=(0,r.forwardRef)(({value:e,onChange:t,onExecute:n,language:i="sql",theme:l="brutalist-light",readOnly:c=!1},u)=>{const d=(0,r.useRef)(null),m=(0,r.useRef)(null),h=(0,r.useRef)(n);(0,r.useEffect)(()=>{h.current=n},[n]),(0,r.useEffect)(()=>{if(m.current&&l){const e="brutalist-light"===l?"brutalist-light":"brutalist-dark"===l?"brutalist-dark":l;m.current.editor.setTheme(e)}},[l]),(0,r.useImperativeHandle)(u,()=>({setValue:e=>{d.current&&d.current.setValue(e)},getValue:()=>d.current?.getValue()||"",focus:()=>{d.current?.focus()}}));return(0,o.jsx)("div",{className:a,onMouseEnter:()=>{d.current?.focus()},children:(0,o.jsx)(s.Ay,{height:"100%",language:i,theme:l,value:e,onChange:e=>t(e||""),beforeMount:e=>{if(e.editor.defineTheme("brutalist-light",{base:"vs",inherit:!0,rules:[{token:"keyword",foreground:"383838",fontStyle:"bold"},{token:"string.sql",foreground:"16A34A"},{token:"comment",foreground:"5A5A5A"},{token:"number",foreground:"B91C1C",fontStyle:"bold"},{token:"operator",foreground:"383838",fontStyle:"bold"},{token:"identifier",foreground:"1A1A1A"},{token:"type",foreground:"7C3AED",fontStyle:"bold"}],colors:{"editor.background":"#F8F8F7","editor.foreground":"#1A1A1A","editor.lineHighlightBackground":"#F4EFEA","editorLineNumber.foreground":"#5A5A5A","editor.selectionBackground":"#383838","editor.selectionForeground":"#FFFFFF","editor.inactiveSelectionBackground":"#E5E5E5","editorCursor.foreground":"#383838","editor.lineHighlightBorder":"#383838","editorIndentGuide.background":"#E5E5E5","editorIndentGuide.activeBackground":"#383838"}}),e.editor.defineTheme("brutalist-dark",{base:"vs-dark",inherit:!0,rules:[{token:"keyword",foreground:"F8F8F7",fontStyle:"bold"},{token:"string.sql",foreground:"53DBC9"},{token:"comment",foreground:"999999"},{token:"number",foreground:"FF6B35",fontStyle:"bold"},{token:"operator",foreground:"F8F8F7",fontStyle:"bold"},{token:"identifier",foreground:"F8F8F7"},{token:"type",foreground:"6FC2FF",fontStyle:"bold"}],colors:{"editor.background":"#2A2A2A","editor.foreground":"#F8F8F7","editor.lineHighlightBackground":"#1A1A1A","editorLineNumber.foreground":"#999999","editor.selectionBackground":"#F8F8F7","editor.selectionForeground":"#1A1A1A","editor.inactiveSelectionBackground":"#3A3A3A","editorCursor.foreground":"#F8F8F7","editor.lineHighlightBorder":"#F8F8F7","editorIndentGuide.background":"#3A3A3A","editorIndentGuide.activeBackground":"#F8F8F7"}}),e&&e.editor)try{const t="brutalist-light"===l?"brutalist-light":"brutalist-dark"===l?"brutalist-dark":l;e.editor.setTheme(t)}catch(t){}},onMount:(e,t)=>{d.current=e,m.current=t;const n="brutalist-light"===l?"brutalist-light":"brutalist-dark"===l?"brutalist-dark":l;t.editor.setTheme(n),e.focus(),t.languages.registerCompletionItemProvider("sql",{provideCompletionItems:(e,n)=>{const r=e.getWordUntilPosition(n),s={startLineNumber:n.lineNumber,endLineNumber:n.lineNumber,startColumn:r.startColumn,endColumn:r.endColumn};return{suggestions:[...["REIFY","FLOW","STREAM","MATERIALIZE"].map(e=>({label:e,kind:t.languages.CompletionItemKind.Keyword,insertText:e,documentation:`ReifyDB keyword: ${e}`,range:s})),...["SELECT","FROM","WHERE","INSERT","UPDATE","DELETE","CREATE","DROP","ALTER","TABLE","INDEX","VIEW","JOIN","LEFT","RIGHT","INNER","OUTER","ON","GROUP BY","ORDER BY","HAVING","LIMIT","OFFSET","AS","INTO","VALUES","SET"].map(e=>({label:e,kind:t.languages.CompletionItemKind.Keyword,insertText:e,range:s})),...["COUNT","SUM","AVG","MIN","MAX","NOW","CURRENT_TIMESTAMP"].map(e=>({label:e,kind:t.languages.CompletionItemKind.Function,insertText:`${e}()`,range:s}))]}}}),e.onKeyDown(e=>{(e.ctrlKey||e.metaKey)&&e.keyCode===t.KeyCode.Enter&&(e.preventDefault(),e.stopPropagation(),h.current&&h.current())});const r=`execute-query-${Math.random().toString(36).substring(2,11)}`;e.addAction({id:r,label:"Execute Query",keybindings:[t.KeyMod.CtrlCmd|t.KeyCode.Enter],contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:()=>{h.current&&h.current()}}),e.updateOptions({minimap:{enabled:!1},fontSize:16,fontFamily:"'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', monospace",fontWeight:"500",lineNumbers:"on",lineNumbersMinChars:3,lineHeight:26,roundedSelection:!1,scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2,wordWrap:"off",padding:{top:16,bottom:16},suggest:{showKeywords:!0,showSnippets:!0,showFunctions:!0,preview:!1},renderLineHighlight:"all",renderIndentGuides:!0,cursorStyle:"block",cursorBlinking:"solid",smoothScrolling:!1,hover:{enabled:!0,delay:300},quickSuggestions:{other:!0,comments:!1,strings:!1},parameterHints:{enabled:!0},suggestOnTriggerCharacters:!0,acceptSuggestionOnEnter:"on",wordBasedSuggestions:!1})},options:{readOnly:c,automaticLayout:!0}})})});i.displayName="CodeEditor";const l=i},7566:(e,t,n)=>{n.d(t,{w:()=>l});var r=n(9729),s=n(4462),a=n(1090);class o{state={client:null,isConnected:!1,isConnecting:!1,connectionError:null,listeners:new Set};constructor(){}static getInstance(){return o.instance||(o.instance=new o),o.instance}async connect(e=a.R.getWebSocketUrl(),t){if(!this.state.isConnected&&!this.state.isConnecting){this.updateState({isConnecting:!0,connectionError:null});try{const n=await s.Kj.connect_ws(e,{timeoutMs:1e3,...t});this.updateState({client:n,isConnected:!0,isConnecting:!1,connectionError:null})}catch(n){const e=n instanceof Error?n.message:"Failed to connect to ReifyDB";throw this.updateState({client:null,isConnected:!1,isConnecting:!1,connectionError:e}),n}}}disconnect(){if(this.state.client)try{this.state.client.disconnect()}catch(e){console.error("Error disconnecting:",e)}this.updateState({client:null,isConnected:!1,isConnecting:!1,connectionError:null})}async reconnect(e,t){this.disconnect(),await this.connect(e,t)}getClient(){return this.state.client}isConnected(){return this.state.isConnected}isConnecting(){return this.state.isConnecting}getConnectionError(){return this.state.connectionError}getState(){const{listeners:e,...t}=this.state;return t}subscribe(e){return this.state.listeners.add(e),()=>{this.state.listeners.delete(e)}}updateState(e){this.state={...this.state,...e},this.state.listeners.forEach(e=>{e(this.state)})}}const i=o.getInstance();function l(){const[e,t]=(0,r.useState)(()=>i.getState());return(0,r.useEffect)(()=>{const e=i.subscribe(e=>{t({client:e.client,isConnected:e.isConnected,isConnecting:e.isConnecting,connectionError:e.connectionError})});return i.isConnected()||i.isConnecting()||i.connect().catch(e=>{console.error("Failed to connect:",e)}),e},[]),{...e,connect:()=>i.connect(),disconnect:()=>i.disconnect(),reconnect:()=>i.reconnect()}}}}]);