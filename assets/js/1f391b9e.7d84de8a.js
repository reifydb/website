"use strict";(self.webpackChunkreifydb_docs=self.webpackChunkreifydb_docs||[]).push([[6061,8401],{1090:(e,n,t)=>{t.d(n,{R:()=>s});const s={DEFAULT_WS_URL:"ws://127.0.0.1:8090",CONNECTION:{TIMEOUT_MS:1e4,RECONNECT_INTERVAL_MS:5e3,MAX_RECONNECT_ATTEMPTS:3},QUERY:{MAX_HISTORY_SIZE:100,DEFAULT_EXECUTION_TIMEOUT:3e4},DOCKER_COMMAND:"docker run -p 127.0.0.1:8090:8090 reifydb/testcontainer",getWebSocketUrl(){if("undefined"!=typeof window){const e=window.REIFYDB_WS_URL;if(e)return e;if("localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname)return`wss://${window.location.hostname}/ws`}return this.DEFAULT_WS_URL}}},2153:(e,n,t)=>{t.d(n,{A:()=>i});var s=t(9729);const r={brutalistContainer:"brutalistContainer_APvi",loadingBox:"loadingBox_aZTp",loadingSpinner:"loadingSpinner_cU7F",spin:"spin_S0yu",loadingText:"loadingText_uANT",errorBox:"errorBox_CVh4",errorHeader:"errorHeader_wshI",errorLabel:"errorLabel__alV",errorMessage:"errorMessage_E7e2",emptyBox:"emptyBox_snBC",emptyText:"emptyText_zCsI",emptyHint:"emptyHint_veDV",resultHeader:"resultHeader_TJTA",statsBox:"statsBox_DGe5",statItem:"statItem_FUB2",brutalistButton:"brutalistButton_Um01",tableContainer:"tableContainer_psY8",brutalistTable:"brutalistTable_XbYV",indexHeader:"indexHeader_nZP1",columnHeader:"columnHeader_jU89",headerContent:"headerContent_OWGD",columnName:"columnName_vxjW",columnType:"columnType_Q4Da",sortArrow:"sortArrow_rbdO",dataRow:"dataRow_Yuq2",indexCell:"indexCell_kfvR",dataCell:"dataCell_ETmi",cellValue:"cellValue_Ndje",nullValue:"nullValue_dF2x",boolValue:"boolValue_CCaZ",true:"true_LAGZ",false:"false_NP6X",jsonValue:"jsonValue_ULIV","type-number":"type-number_yLB8","type-date":"type-date_kesV","type-blob":"type-blob_ykgX",noDataCell:"noDataCell_YmTR",noDataBox:"noDataBox_aMLA",noDataHint:"noDataHint_yKui"};var a=t(5813);function i({result:e,error:n,isLoading:t}){const[i,l]=(0,s.useState)(null),[o,c]=(0,s.useState)("asc"),d=(0,s.useCallback)(e=>{if(void 0===e)return"NULL";const n=e.valueOf();if(null==n)return"NULL";if(!0===n)return"TRUE";if(!1===n)return"FALSE";if("bigint"==typeof n)return n.toString();if(n instanceof Date)return n.toISOString().replace("T"," ").substring(0,19);if(n instanceof Uint8Array){const e=Array.from(n).map(e=>e.toString(16).padStart(2,"0")).join("");return"0x"+(e.length>16?e.substring(0,16)+"...":e)}return String(n)},[]),u=(0,s.useCallback)(e=>{if(void 0===e)return"null";const n=e.valueOf();if(null==n)return"null";if("boolean"==typeof n)return"boolean";if("bigint"==typeof n||"number"==typeof n)return"number";if(n instanceof Date)return"date";if(n instanceof Uint8Array)return"blob";if("string"==typeof n){if(n.startsWith("{")&&n.endsWith("}")||n.startsWith("[")&&n.endsWith("]"))try{return JSON.parse(n),"json"}catch{return"string"}return"string"}return"unknown"},[]),m=(0,s.useCallback)(e=>{i===e?c("asc"===o?"desc":"asc"):(l(e),c("asc"))},[i,o]),h=(0,s.useMemo)(()=>e&&i&&0!==e.rows.length?[...e.rows].sort((e,n)=>{const t=e[i]?.valueOf(),s=n[i]?.valueOf();if(null==t)return 1;if(null==s)return-1;let r=0;return t<s&&(r=-1),t>s&&(r=1),"asc"===o?r:-r}):e?.rows||[],[e,i,o]),x=(0,s.useCallback)(()=>{if(!e)return;const n=[e.columns.map(e=>e.name).join(","),...e.rows.map(n=>e.columns.map(e=>{const t=d(n[e.name]);return t.includes(",")?`"${t}"`:t}).join(","))].join("\n"),t=new Blob([n],{type:"text/csv"}),s=URL.createObjectURL(t),r=document.createElement("a");r.href=s,r.download=`query-results-${Date.now()}.csv`,r.click(),URL.revokeObjectURL(s)},[e,d]);return t?(0,a.jsx)("div",{className:r.brutalistContainer,children:(0,a.jsxs)("div",{className:r.loadingBox,children:[(0,a.jsx)("div",{className:r.loadingSpinner}),(0,a.jsx)("span",{className:r.loadingText,children:"EXECUTING QUERY"})]})}):n?(0,a.jsx)("div",{className:r.brutalistContainer,children:(0,a.jsxs)("div",{className:r.errorBox,children:[(0,a.jsx)("div",{className:r.errorHeader,children:(0,a.jsx)("span",{className:r.errorLabel,children:"ERROR"})}),(0,a.jsx)("pre",{className:r.errorMessage,children:n})]})}):e?(0,a.jsx)("div",{className:r.brutalistContainer,children:(0,a.jsxs)("div",{className:r.tableContainer,children:[(0,a.jsxs)("table",{className:r.brutalistTable,children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:r.indexHeader,children:"#"}),e.columns.map((e,n)=>(0,a.jsx)("th",{className:r.columnHeader,onClick:()=>m(e.name),children:(0,a.jsxs)("div",{className:r.headerContent,children:[(0,a.jsx)("span",{className:r.columnName,children:e.name}),(0,a.jsx)("span",{className:r.columnType,children:e.ty}),i===e.name&&(0,a.jsx)("span",{className:r.sortArrow,children:"asc"===o?"\u25b2":"\u25bc"})]})},n))]})}),(0,a.jsx)("tbody",{children:h.length>0?h.map((n,t)=>(0,a.jsxs)("tr",{className:r.dataRow,children:[(0,a.jsx)("td",{className:r.indexCell,children:t+1}),e.columns.map((e,t)=>{const s=n[e.name],i=d(s),l=u(s);return(0,a.jsx)("td",{className:`${r.dataCell} ${r[`type-${l}`]}`,children:"null"===l?(0,a.jsx)("span",{className:r.nullValue,children:"NULL"}):"boolean"===l?(0,a.jsx)("span",{className:`${r.boolValue} ${"TRUE"===i?r.true:r.false}`,children:i}):"json"===l?(0,a.jsx)("code",{className:r.jsonValue,children:i.length>50?i.substring(0,50)+"...":i}):(0,a.jsx)("span",{className:r.cellValue,children:i})},t)})]},t)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:e.columns.length+1,className:r.noDataCell,children:(0,a.jsxs)("div",{className:r.noDataBox,children:[(0,a.jsx)("span",{children:"QUERY EXECUTED SUCCESSFULLY"}),(0,a.jsx)("span",{className:r.noDataHint,children:"NO ROWS RETURNED"})]})})})})]}),(0,a.jsxs)("div",{className:r.resultHeader,children:[(0,a.jsxs)("div",{className:r.statsBox,children:[(0,a.jsxs)("span",{className:r.statItem,children:["ROWS: ",(0,a.jsx)("strong",{children:e.rows.length})]}),void 0!==e.rowsAffected&&(0,a.jsxs)("span",{className:r.statItem,children:["AFFECTED: ",(0,a.jsx)("strong",{children:e.rowsAffected})]})]}),(0,a.jsx)("button",{className:r.brutalistButton,onClick:x,children:"EXPORT CSV"})]})]})}):(0,a.jsx)("div",{className:r.brutalistContainer,children:(0,a.jsxs)("div",{className:r.emptyBox,children:[(0,a.jsx)("span",{className:r.emptyText,children:"NO RESULTS"}),(0,a.jsx)("span",{className:r.emptyHint,children:"EXECUTE A QUERY TO SEE RESULTS"})]})})}},3856:(e,n,t)=>{t.d(n,{I:()=>r});var s=t(9729);function r(e,n={}){const[t,r]=(0,s.useState)({isExecuting:!1,result:null,error:null,executionTime:null}),[a,i]=(0,s.useState)([]),l=(0,s.useRef)(null),o=(0,s.useCallback)(async t=>{if(!e){const e="No connection to ReifyDB server";return n.onError?.(e),null}if(!t.trim()){const e="Query cannot be empty";return n.onError?.(e),null}l.current&&l.current.abort(),l.current=new AbortController,r({isExecuting:!0,result:null,error:null,executionTime:null});const s=Date.now();try{const a=await e.query(t,null,[]),l=Date.now()-s;let o;const c=a?.[0];if(Array.isArray(c)&&c.length>0){const e=c[0],n=Object.keys(e).map(n=>{const t=e[n];return{name:n,ty:t?.type||"Utf8",data:[]}});o={columns:n,rows:c,executionTimeMs:l}}else o={columns:[],rows:[],executionTimeMs:l};if(r({isExecuting:!1,result:o,error:null,executionTime:l}),!1!==n.addToHistory){const e={id:Date.now().toString(),query:t,timestamp:Date.now(),executionTimeMs:l,success:!0};i(n=>[e,...n].slice(0,100))}return n.onSuccess?.(o),o}catch(a){const e=Date.now()-s;let l="Query execution failed";if(a instanceof Error?l=a.message:"string"==typeof a?l=a:a&&"object"==typeof a&&"message"in a&&(l=a.message),r({isExecuting:!1,result:null,error:l,executionTime:e}),!1!==n.addToHistory){const n={id:Date.now().toString(),query:t,timestamp:Date.now(),executionTimeMs:e,success:!1,error:l};i(e=>[n,...e].slice(0,100))}return n.onError?.(l),null}finally{l.current=null}},[e,n]),c=(0,s.useCallback)(()=>{r({isExecuting:!1,result:null,error:null,executionTime:null})},[]),d=(0,s.useCallback)(()=>{i([])},[]),u=(0,s.useCallback)(()=>{l.current&&(l.current.abort(),r(e=>({...e,isExecuting:!1,error:"Query cancelled"})))},[]);return{isExecuting:t.isExecuting,result:t.result,error:t.error,executionTime:t.executionTime,history:a,executeQuery:o,clearResults:c,clearHistory:d,cancelQuery:u}}},4454:(e,n,t)=>{t.d(n,{A:()=>u});var s=t(9729),r=t(7566),a=t(3856),i=t(1090),l=t(2153);const o={brutalistEditor:"brutalistEditor_cL4z",editorContainer:"editorContainer_YYhe",editorWrapper:"editorWrapper_nmoD",codeContainer:"codeContainer___gc",editorActions:"editorActions_VMrc",executeBtn:"executeBtn_eig7",toggleBtn:"toggleBtn_M5NM",resetBtn:"resetBtn_nvM3",shortcutHint:"shortcutHint_UqyU",connectionDot:"connectionDot_Ohfw",connected:"connected_bP1i",pulse:"pulse_xWTZ",disconnected:"disconnected_XsOD",staticEditor:"staticEditor_KoL3",codeBlock:"codeBlock_jE7X",editorLoading:"editorLoading_Suip",loadingSpinner:"loadingSpinner_aP2V",spinner:"spinner_A9Mt",spin:"spin_LQ3s",resultsWrapper:"resultsWrapper_SoPi",statementResult:"statementResult_ISl6",statementHeader:"statementHeader_ZbAY",statementNumber:"statementNumber_VTQL",statementPreview:"statementPreview_LowY",modalOverlay:"modalOverlay_zcm8",brutalistModal:"brutalistModal_ve6W",modalHeader:"modalHeader_xJV6",modalCloseBtn:"modalCloseBtn_jIsH",modalContent:"modalContent_e58t",modalError:"modalError_wIT0",modalText:"modalText_KLui",commandBox:"commandBox_kSOX",copyBtn:"copyBtn_bS8K",modalActions:"modalActions_iCGV",brutalistBtnSecondary:"brutalistBtnSecondary_Dexq",brutalistBtnPrimary:"brutalistBtnPrimary_ci_i"};var c=t(5813);const d=(0,s.lazy)(()=>Promise.all([t.e(1869),t.e(8655),t.e(6158)]).then(t.bind(t,6158)));function u({query:e,defaultExpanded:n=!1,editable:t=!0}){const[u,m]=(0,s.useState)(e),[h,x]=(0,s.useState)(n),[g,f]=(0,s.useState)([]),[p,C]=(0,s.useState)("brutalist-light"),[N,v]=(0,s.useState)(!1),[b,j]=(0,s.useState)(0),E=(0,s.useRef)(null),y=(0,s.useRef)(null),_=(0,s.useRef)(null),w=(0,s.useRef)(()=>{}),{client:T,isConnected:S,isConnecting:A,connectionError:L,connect:R,reconnect:O}=(0,r.w)(),{isExecuting:k,executeQuery:H,clearResults:B}=(0,a.I)(T,{addToHistory:!1}),U=(0,s.useCallback)(e=>{const n=e.split("\n").length,t="undefined"!=typeof window?window.innerHeight:800,s=Math.floor(.8*t);return Math.min(Math.max(24*n+20,92),s)},[]),[D,I]=(0,s.useState)(()=>{const n=e.split("\n").length;return Math.min(Math.max(24*n+20,92),640)}),M=(0,s.useCallback)(e=>{y.current&&(y.current.style.height=`${e}px`,y.current.style.minHeight=`${e}px`,y.current.style.maxHeight=`${e}px`)},[]);(0,s.useEffect)(()=>{const e=()=>{const e=document.documentElement.getAttribute("data-theme");C("dark"===e?"brutalist-dark":"brutalist-light")};e();const n=new MutationObserver(e);return n.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),()=>n.disconnect()},[]),(0,s.useEffect)(()=>{if("undefined"==typeof window)return;const e=()=>{const e=U(u);M(e),I(e)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[u,U,M]),(0,s.useEffect)(()=>{S&&N&&(v(!1),j(0),_.current&&(clearInterval(_.current),_.current=null))},[S,N]),(0,s.useEffect)(()=>{const e=e=>{"Escape"===e.key&&N&&v(!1)};if(N)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[N]),(0,s.useEffect)(()=>()=>{_.current&&clearInterval(_.current)},[]);const V=(0,s.useCallback)(()=>{A||(j(10),_.current&&clearInterval(_.current),_.current=setInterval(()=>{j(e=>e<=1?(_.current&&(clearInterval(_.current),_.current=null),0):e-1)},1e3),S?O():R())},[A,S,O,R]),W=(0,s.useCallback)(async()=>{if(!u?.trim()||k)return;if(!S)return void v(!0);x(!0),B();const e=(e=>{const n=[];let t="",s=!1,r="";for(let i=0;i<e.length;i++){const a=e[i],l=i>0?e[i-1]:"";if(s||"'"!==a&&'"'!==a)if(s&&a===r&&"\\"!==l)s=!1,t+=a;else if(s||";"!==a)t+=a;else{const e=t.trim();e&&n.push(e),t=""}else s=!0,r=a,t+=a}const a=t.trim();return a&&n.push(a),n})(u),n=[];for(const s of e)try{const e=await H(s);n.push({statement:s,result:e,error:null})}catch(t){n.push({statement:s,result:null,error:t instanceof Error?t.message:"Unknown error occurred"})}f(n)},[u,k,S,H,B,T]);(0,s.useEffect)(()=>{w.current=W},[W]);const P=(0,s.useCallback)(()=>{w.current()},[]);return(0,c.jsxs)(c.Fragment,{children:[N&&!S&&(0,c.jsx)("div",{className:o.modalOverlay,onClick:()=>v(!1),children:(0,c.jsxs)("div",{className:o.brutalistModal,onClick:e=>e.stopPropagation(),children:[(0,c.jsxs)("div",{className:o.modalHeader,children:[(0,c.jsx)("h3",{children:"NO CONNECTION"}),(0,c.jsx)("button",{className:o.modalCloseBtn,onClick:()=>v(!1),children:"\u2715"})]}),(0,c.jsxs)("div",{className:o.modalContent,children:[L&&(0,c.jsxs)("div",{className:o.modalError,children:["ERROR: ",L]}),(0,c.jsx)("p",{className:o.modalText,children:"START THE REIFYDB TEST CONTAINER TO RUN QUERIES"}),(0,c.jsxs)("div",{className:o.commandBox,children:[(0,c.jsx)("code",{children:i.R.DOCKER_COMMAND}),(0,c.jsx)("button",{className:o.copyBtn,onClick:()=>{navigator.clipboard.writeText(i.R.DOCKER_COMMAND);const e=event?.target;e&&(e.textContent="COPIED",setTimeout(()=>{e.textContent="COPY"},2e3))},children:"COPY"})]})]}),(0,c.jsxs)("div",{className:o.modalActions,children:[(0,c.jsx)("button",{className:o.brutalistBtnSecondary,onClick:()=>v(!1),children:"CANCEL"}),(0,c.jsx)("button",{className:o.brutalistBtnPrimary,onClick:V,disabled:A||b>0,children:A?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:o.spinner}),"CONNECTING..."]}):b>0?`RETRY IN ${b}S`:"TRY TO CONNECT"})]})]})}),(0,c.jsxs)("div",{className:o.brutalistEditor,children:[(0,c.jsx)("div",{className:o.editorContainer,children:t?(0,c.jsx)(s.Suspense,{fallback:(0,c.jsxs)("div",{className:o.editorLoading,children:[(0,c.jsx)("div",{className:o.loadingSpinner}),(0,c.jsx)("span",{children:"LOADING EDITOR..."})]}),children:(0,c.jsxs)("div",{className:o.editorWrapper,children:[(0,c.jsx)("div",{ref:y,className:o.codeContainer,style:{height:`${D}px`,minHeight:`${D}px`,maxHeight:`${D}px`},children:(0,c.jsx)(d,{ref:E,value:u,onChange:(0,s.useCallback)(e=>{m(e);const n=U(e);I(n),M(n)},[U,M]),onExecute:P,language:"sql",theme:p,readOnly:k})}),(0,c.jsxs)("div",{className:o.editorActions,children:[(0,c.jsx)("button",{className:o.executeBtn,onClick:W,disabled:k,children:k?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:o.spinner}),"EXECUTING..."]}):(0,c.jsx)(c.Fragment,{children:"\u25b6 RUN QUERY"})}),g.length>0&&(0,c.jsxs)("button",{className:o.toggleBtn,onClick:()=>x(!h),children:[h?"\u25bc":"\u25b6"," ",h?"HIDE":"SHOW"," RESULTS (",g.length,")"]}),t&&u!==e&&(0,c.jsx)("button",{className:o.resetBtn,onClick:()=>{m(e);const n=U(e);I(n),M(n),E.current&&E.current.setValue(e)},children:"\u21ba RESET"}),(0,c.jsx)("span",{className:o.shortcutHint,children:"CTRL+ENTER TO RUN"}),(0,c.jsx)("span",{className:`${o.connectionDot} ${S?o.connected:o.disconnected}`,children:A?"CONNECTING":S?"CONNECTED":"DISCONNECTED"})]})]})}):(0,c.jsxs)("div",{className:o.staticEditor,children:[(0,c.jsx)("pre",{className:o.codeBlock,children:(0,c.jsx)("code",{children:u})}),(0,c.jsxs)("div",{className:o.editorActions,children:[(0,c.jsx)("button",{className:o.executeBtn,onClick:W,disabled:k||!S,children:k?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:o.spinner}),"EXECUTING..."]}):(0,c.jsx)(c.Fragment,{children:"\u25b6 RUN QUERY"})}),g.length>0&&(0,c.jsxs)("button",{className:o.toggleBtn,onClick:()=>x(!h),children:[h?"\u25bc":"\u25b6"," ",h?"HIDE":"SHOW"," RESULTS (",g.length,")"]}),(0,c.jsx)("span",{className:`${o.connectionDot} ${S?o.connected:o.disconnected}`,children:A?"CONNECTING":S?"CONNECTED":"DISCONNECTED"})]})]})}),h&&g.length>0&&(0,c.jsx)("div",{className:o.resultsWrapper,children:g.map((e,n)=>((e,n)=>{const{statement:t,result:s,error:r}=e;return(0,c.jsx)("div",{children:(0,c.jsx)(l.A,{result:s||void 0,error:r||void 0,isLoading:!1})},n)})(e,n))})]})]})}},5868:(e,n,t)=>{t.d(n,{A:()=>p});t(9729);var s=t(3526),r=t(2809),a=t(6810),i=t(5813);function l(){return(0,i.jsx)(r.A,{id:"theme.contentVisibility.unlistedBanner.title",description:"The unlisted content banner title",children:"Unlisted page"})}function o(){return(0,i.jsx)(r.A,{id:"theme.contentVisibility.unlistedBanner.message",description:"The unlisted content banner message",children:"This page is unlisted. Search engines will not index it, and only users having a direct link can access it."})}function c(){return(0,i.jsx)(a.A,{children:(0,i.jsx)("meta",{name:"robots",content:"noindex, nofollow"})})}function d(){return(0,i.jsx)(r.A,{id:"theme.contentVisibility.draftBanner.title",description:"The draft content banner title",children:"Draft page"})}function u(){return(0,i.jsx)(r.A,{id:"theme.contentVisibility.draftBanner.message",description:"The draft content banner message",children:"This page is a draft. It will only be visible in dev and be excluded from the production build."})}var m=t(4524),h=t(3316);function x({className:e}){return(0,i.jsx)(h.A,{type:"caution",title:(0,i.jsx)(d,{}),className:(0,s.A)(e,m.G.common.draftBanner),children:(0,i.jsx)(u,{})})}function g({className:e}){return(0,i.jsx)(h.A,{type:"caution",title:(0,i.jsx)(l,{}),className:(0,s.A)(e,m.G.common.unlistedBanner),children:(0,i.jsx)(o,{})})}function f(e){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c,{}),(0,i.jsx)(g,{...e})]})}function p({metadata:e}){const{unlisted:n,frontMatter:t}=e;return(0,i.jsxs)(i.Fragment,{children:[(n||t.unlisted)&&(0,i.jsx)(f,{}),t.draft&&(0,i.jsx)(x,{})]})}},6032:(e,n,t)=>{t.r(n),t.d(n,{default:()=>h});t(9729);var s=t(3526),r=t(7007),a=t(4524),i=t(3099),l=t(8411),o=t(7374),c=t(5868),d=t(8784);const u={mdxPageWrapper:"mdxPageWrapper_dlic"};var m=t(5813);function h(e){const{content:n}=e,{metadata:t,assets:h}=n,{title:x,editUrl:g,description:f,frontMatter:p,lastUpdatedBy:C,lastUpdatedAt:N}=t,{keywords:v,wrapperClassName:b,hide_table_of_contents:j}=p,E=h.image??p.image,y=!!(g||N||C);return(0,m.jsx)(r.e3,{className:(0,s.A)(b??a.G.wrapper.mdxPages,a.G.page.mdxPage),children:(0,m.jsxs)(i.A,{children:[(0,m.jsx)(r.be,{title:x,description:f,keywords:v,image:E}),(0,m.jsx)("main",{className:"container container--fluid margin-vert--lg",children:(0,m.jsxs)("div",{className:(0,s.A)("row",u.mdxPageWrapper),children:[(0,m.jsxs)("div",{className:(0,s.A)("col",!j&&"col--8"),children:[(0,m.jsx)(c.A,{metadata:t}),(0,m.jsx)("article",{children:(0,m.jsx)(l.A,{children:(0,m.jsx)(n,{})})}),y&&(0,m.jsx)(d.A,{className:(0,s.A)("margin-top--sm",a.G.pages.pageFooterEditMetaRow),editUrl:g,lastUpdatedAt:N,lastUpdatedBy:C})]}),!j&&n.toc.length>0&&(0,m.jsx)("div",{className:"col col--2",children:(0,m.jsx)(o.A,{toc:n.toc,minHeadingLevel:p.toc_min_heading_level,maxHeadingLevel:p.toc_max_heading_level})})]})})]})})}},6068:(e,n,t)=>{t.d(n,{A:()=>l});var s=t(9729),r=t(4454),a=t(9717),i=t(5813);function l({query:e,defaultExpanded:n=!1,editable:t=!0,language:l="sql",forceViewer:o=!1}){const[c,d]=(0,s.useState)(()=>{if("undefined"==typeof window)return!1;const e="ontouchstart"in window||navigator.maxTouchPoints>0,n=window.innerWidth<=768;return e||n});(0,s.useEffect)(()=>{const e=()=>{const e="ontouchstart"in window||navigator.maxTouchPoints>0,n=window.innerWidth<=768;d(e||n)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);return o||c||!t?(0,i.jsx)(a.A,{query:e,language:l}):(0,i.jsx)(r.A,{query:e,defaultExpanded:n,editable:t})}},7374:(e,n,t)=>{t.d(n,{A:()=>c});t(9729);var s=t(3526),r=t(9695);const a={tableOfContents:"tableOfContents_NQA8",docItemContainer:"docItemContainer_YpTj"};var i=t(5813);const l="table-of-contents__link toc-highlight",o="table-of-contents__link--active";function c({className:e,...n}){return(0,i.jsx)("div",{className:(0,s.A)(a.tableOfContents,"thin-scrollbar",e),children:(0,i.jsx)(r.A,{...n,linkClassName:l,linkActiveClassName:o})})}},7566:(e,n,t)=>{t.d(n,{w:()=>o});var s=t(9729),r=t(4462),a=t(1090);class i{state={client:null,isConnected:!1,isConnecting:!1,connectionError:null,listeners:new Set};constructor(){}static getInstance(){return i.instance||(i.instance=new i),i.instance}async connect(e=a.R.getWebSocketUrl(),n){if(!this.state.isConnected&&!this.state.isConnecting){this.updateState({isConnecting:!0,connectionError:null});try{const t=await r.Kj.connect_ws(e,{timeoutMs:1e3,...n});this.updateState({client:t,isConnected:!0,isConnecting:!1,connectionError:null})}catch(t){const e=t instanceof Error?t.message:"Failed to connect to ReifyDB";throw this.updateState({client:null,isConnected:!1,isConnecting:!1,connectionError:e}),t}}}disconnect(){if(this.state.client)try{this.state.client.disconnect()}catch(e){console.error("Error disconnecting:",e)}this.updateState({client:null,isConnected:!1,isConnecting:!1,connectionError:null})}async reconnect(e,n){this.disconnect(),await this.connect(e,n)}getClient(){return this.state.client}isConnected(){return this.state.isConnected}isConnecting(){return this.state.isConnecting}getConnectionError(){return this.state.connectionError}getState(){const{listeners:e,...n}=this.state;return n}subscribe(e){return this.state.listeners.add(e),()=>{this.state.listeners.delete(e)}}updateState(e){this.state={...this.state,...e},this.state.listeners.forEach(e=>{e(this.state)})}}const l=i.getInstance();function o(){const[e,n]=(0,s.useState)(()=>l.getState());return(0,s.useEffect)(()=>{const e=l.subscribe(e=>{n({client:e.client,isConnected:e.isConnected,isConnecting:e.isConnecting,connectionError:e.connectionError})});return l.isConnected()||l.isConnecting()||l.connect().catch(e=>{console.error("Failed to connect:",e)}),e},[]),{...e,connect:()=>l.connect(),disconnect:()=>l.disconnect(),reconnect:()=>l.reconnect()}}},9695:(e,n,t)=>{t.d(n,{A:()=>g});var s=t(9729),r=t(8555);function a(e){const n=e.map(e=>({...e,parentIndex:-1,children:[]})),t=Array(7).fill(-1);n.forEach((e,n)=>{const s=t.slice(2,e.level);e.parentIndex=Math.max(...s),t[e.level]=n});const s=[];return n.forEach(e=>{const{parentIndex:t,...r}=e;t>=0?n[t].children.push(r):s.push(r)}),s}function i({toc:e,minHeadingLevel:n,maxHeadingLevel:t}){return e.flatMap(e=>{const s=i({toc:e.children,minHeadingLevel:n,maxHeadingLevel:t});return function(e){return e.level>=n&&e.level<=t}(e)?[{...e,children:s}]:s})}function l(e){const n=e.getBoundingClientRect();return n.top===n.bottom?l(e.parentNode):n}function o(e,{anchorTopOffset:n}){const t=e.find(e=>l(e).top>=n);if(t){return function(e){return e.top>0&&e.bottom<window.innerHeight/2}(l(t))?t:e[e.indexOf(t)-1]??null}return e[e.length-1]??null}function c(){const e=(0,s.useRef)(0),{navbar:{hideOnScroll:n}}=(0,r.p)();return(0,s.useEffect)(()=>{e.current=n?0:document.querySelector(".navbar").clientHeight},[n]),e}function d(e){const n=(0,s.useRef)(void 0),t=c();(0,s.useEffect)(()=>{if(!e)return()=>{};const{linkClassName:s,linkActiveClassName:r,minHeadingLevel:a,maxHeadingLevel:i}=e;function l(){const e=function(e){return Array.from(document.getElementsByClassName(e))}(s),l=function({minHeadingLevel:e,maxHeadingLevel:n}){const t=[];for(let s=e;s<=n;s+=1)t.push(`h${s}.anchor`);return Array.from(document.querySelectorAll(t.join()))}({minHeadingLevel:a,maxHeadingLevel:i}),c=o(l,{anchorTopOffset:t.current}),d=e.find(e=>c&&c.id===function(e){return decodeURIComponent(e.href.substring(e.href.indexOf("#")+1))}(e));e.forEach(e=>{!function(e,t){t?(n.current&&n.current!==e&&n.current.classList.remove(r),e.classList.add(r),n.current=e):e.classList.remove(r)}(e,e===d)})}return document.addEventListener("scroll",l),document.addEventListener("resize",l),l(),()=>{document.removeEventListener("scroll",l),document.removeEventListener("resize",l)}},[e,t])}var u=t(5724),m=t(5813);function h({toc:e,className:n,linkClassName:t,isChild:s}){return e.length?(0,m.jsx)("ul",{className:s?void 0:n,children:e.map(e=>(0,m.jsxs)("li",{children:[(0,m.jsx)(u.A,{to:`#${e.id}`,className:t??void 0,dangerouslySetInnerHTML:{__html:e.value}}),(0,m.jsx)(h,{isChild:!0,toc:e.children,className:n,linkClassName:t})]},e.id))}):null}const x=s.memo(h);function g({toc:e,className:n="table-of-contents table-of-contents__left-border",linkClassName:t="table-of-contents__link",linkActiveClassName:l,minHeadingLevel:o,maxHeadingLevel:c,...u}){const h=(0,r.p)(),g=o??h.tableOfContents.minHeadingLevel,f=c??h.tableOfContents.maxHeadingLevel,p=function({toc:e,minHeadingLevel:n,maxHeadingLevel:t}){return(0,s.useMemo)(()=>i({toc:a(e),minHeadingLevel:n,maxHeadingLevel:t}),[e,n,t])}({toc:e,minHeadingLevel:g,maxHeadingLevel:f});return d((0,s.useMemo)(()=>{if(t&&l)return{linkClassName:t,linkActiveClassName:l,minHeadingLevel:g,maxHeadingLevel:f}},[t,l,g,f])),(0,m.jsx)(x,{toc:p,className:n,linkClassName:t,...u})}},9717:(e,n,t)=>{t.d(n,{A:()=>l});var s=t(9729);const r={brutalistViewer:"brutalistViewer_S3Bh",viewerContainer:"viewerContainer_UCqT",codeContainer:"codeContainer_Qn7n",viewerLoading:"viewerLoading_hri4",loadingSpinner:"loadingSpinner_h5aW",spin:"spin_Nrvw",codeBlock:"codeBlock_N6rI"};var a=t(5813);const i=(0,s.lazy)(()=>Promise.all([t.e(1869),t.e(8655),t.e(3777)]).then(t.bind(t,6158)));function l({query:e,language:n="sql"}){const[t,l]=(0,s.useState)("brutalist-light"),o=(0,s.useRef)(null),c=(0,s.useCallback)(e=>{const n=e.split("\n").length;return Math.max(24*n+20,92)},[]),[d]=(0,s.useState)(()=>c(e));return(0,s.useEffect)(()=>{const e=()=>{const e=document.documentElement.getAttribute("data-theme");l("dark"===e?"brutalist-dark":"brutalist-light")};e();const n=new MutationObserver(e);return n.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),()=>n.disconnect()},[]),(0,a.jsx)("div",{className:r.brutalistViewer,children:(0,a.jsx)("div",{className:r.viewerContainer,children:(0,a.jsx)(s.Suspense,{fallback:(0,a.jsxs)("div",{className:r.viewerLoading,children:[(0,a.jsx)("div",{className:r.loadingSpinner}),(0,a.jsx)("span",{children:"LOADING CODE..."})]}),children:(0,a.jsx)("div",{ref:o,className:r.codeContainer,style:{height:`${d}px`,minHeight:`${d}px`,maxHeight:`${d}px`},children:(0,a.jsx)(i,{value:e,onChange:()=>{},onExecute:()=>{},language:n,theme:t,readOnly:!0,options:{readOnly:!0,domReadOnly:!0,cursorStyle:"underline",renderLineHighlight:"none",occurrencesHighlight:!1,selectionHighlight:!1,minimap:{enabled:!1},scrollbar:{vertical:"hidden",horizontal:"hidden",handleMouseWheel:!1,alwaysConsumeMouseWheel:!1},scrollBeyondLastLine:!1,overviewRulerLanes:0,hideCursorInOverviewRuler:!0,overviewRulerBorder:!1,lineNumbers:"on",glyphMargin:!1,folding:!1,lineDecorationsWidth:0,lineNumbersMinChars:3,wordWrap:"on",wordWrapColumn:80,wrappingStrategy:"advanced"}})})})})})}},9865:(e,n,t)=>{t.d(n,{A:()=>l});var s=t(8929),r=t(4454),a=t(9717),i=t(6068);const l={...s.A,InlineEditor:r.A,InlineViewer:a.A,InlineCodeBlock:i.A}}}]);