"use strict";(self.webpackChunkreifydb_docs=self.webpackChunkreifydb_docs||[]).push([[4462],{3687:(t,e,n)=>{n.d(e,{_t:()=>g,Z4:()=>b,f0:()=>V,WE:()=>nt,HP:()=>m,D_:()=>K,D4:()=>et});const r=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;const i=function(t){return"string"==typeof t&&r.test(t)};const s=function(t){if(!i(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)},o="00000000-0000-0000-0000-000000000000",a={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let u;const h=new Uint8Array(16);function l(){if(!u){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");u=crypto.getRandomValues.bind(crypto)}return u(h)}const d=[];for(let rt=0;rt<256;++rt)d.push((rt+256).toString(16).slice(1));function f(t,e=0){return(d[t[e+0]]+d[t[e+1]]+d[t[e+2]]+d[t[e+3]]+"-"+d[t[e+4]]+d[t[e+5]]+"-"+d[t[e+6]]+d[t[e+7]]+"-"+d[t[e+8]]+d[t[e+9]]+"-"+d[t[e+10]]+d[t[e+11]]+d[t[e+12]]+d[t[e+13]]+d[t[e+14]]+d[t[e+15]]).toLowerCase()}const v=function(t,e,n){if(a.randomUUID&&!e&&!t)return a.randomUUID();const r=(t=t||{}).random??t.rng?.()??l();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){if((n=n||0)<0||n+16>e.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let t=0;t<16;++t)e[n+t]=r[t];return e}return f(r)},c={};function p(t,e,n,r,i=0){if(t.length<16)throw new Error("Random bytes length must be >= 16");if(r){if(i<0||i+16>r.length)throw new RangeError(`UUID byte range ${i}:${i+15} is out of buffer bounds`)}else r=new Uint8Array(16),i=0;return e??=Date.now(),n??=127*t[6]<<24|t[7]<<16|t[8]<<8|t[9],r[i++]=e/1099511627776&255,r[i++]=e/4294967296&255,r[i++]=e/16777216&255,r[i++]=e/65536&255,r[i++]=e/256&255,r[i++]=255&e,r[i++]=112|n>>>28&15,r[i++]=n>>>20&255,r[i++]=128|n>>>14&63,r[i++]=n>>>6&255,r[i++]=n<<2&255|3&t[10],r[i++]=t[11],r[i++]=t[12],r[i++]=t[13],r[i++]=t[14],r[i++]=t[15],r}const y=function(t,e,n){let r;if(t)r=p(t.random??t.rng?.()??l(),t.msecs,t.seq,e,n);else{const t=Date.now(),i=l();!function(t,e,n){t.msecs??=-1/0,t.seq??=0,e>t.msecs?(t.seq=n[6]<<23|n[7]<<16|n[8]<<8|n[9],t.msecs=e):(t.seq=t.seq+1|0,0===t.seq&&t.msecs++)}(c,t,i),r=p(i,c.msecs,c.seq,e,n)}return e??f(r)};var m="\u27eaundefined\u27eb",w=class t{constructor(e){if(this.type="Blob",void 0!==e)if(e instanceof Uint8Array)this.bytes=new Uint8Array(e);else if(e instanceof ArrayBuffer)this.bytes=new Uint8Array(e);else if("string"==typeof e){const n=t.parseString(e);if(null===n)throw new Error(`Invalid blob string: ${e}`);this.bytes=n}else{if(!Array.isArray(e))throw new Error("Blob value must be a Uint8Array, ArrayBuffer, string, or number[], got "+typeof e);for(const t of e)if(!Number.isInteger(t)||t<0||t>255)throw new Error(`Invalid byte value: ${t}`);this.bytes=new Uint8Array(e)}else this.bytes=void 0}static new(e){return new t(e)}static empty(){return new t(new Uint8Array(0))}static fromBytes(e){return new t(e)}static fromHex(e){const n=e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e;if(n.length%2!=0)throw new Error("Invalid hex string: odd length");const r=new Uint8Array(n.length/2);for(let t=0;t<n.length;t+=2){const i=parseInt(n.substring(t,t+2),16);if(isNaN(i))throw new Error(`Invalid hex string: ${e}`);r[t/2]=i}return new t(r)}static fromBase64(e){if(!/^[A-Za-z0-9+/]*={0,2}$/.test(e))throw new Error(`Invalid base64 string: ${e}`);try{if("undefined"!=typeof Buffer){const n=Buffer.from(e,"base64");return new t(new Uint8Array(n))}{const n=atob(e),r=new Uint8Array(n.length);for(let t=0;t<n.length;t++)r[t]=n.charCodeAt(t);return new t(r)}}catch(n){throw new Error(`Invalid base64 string: ${e}`)}}static fromUtf8(e){const n=new TextEncoder;return new t(n.encode(e))}static parse(e){const n=e.trim();if(""===n||n===m)return new t(void 0);const r=t.parseString(n);if(null===r)throw new Error(`Cannot parse "${e}" as Blob`);return new t(r)}asBytes(){return this.bytes?new Uint8Array(this.bytes):void 0}length(){return this.bytes?.length??0}isEmpty(){return 0===this.bytes?.length}toHex(){if(void 0===this.bytes)return;return"0x"+Array.from(this.bytes).map(t=>t.toString(16).padStart(2,"0")).join("")}toBase64(){if(void 0!==this.bytes){if("undefined"!=typeof Buffer)return Buffer.from(this.bytes).toString("base64");{const t=Array.from(this.bytes).map(t=>String.fromCharCode(t)).join("");return btoa(t)}}}toUtf8(){if(void 0===this.bytes)return;return(new TextDecoder).decode(this.bytes)}toString(){return void 0===this.bytes?"undefined":this.toHex()}valueOf(){return this.bytes?new Uint8Array(this.bytes):void 0}get value(){return this.valueOf()}equals(t){if(t.type!==this.type)return!1;const e=t;if(void 0===this.bytes||void 0===e.bytes)return this.bytes===e.bytes;if(this.bytes.length!==e.bytes.length)return!1;for(let n=0;n<this.bytes.length;n++)if(this.bytes[n]!==e.bytes[n])return!1;return!0}static parseString(e){if(e.startsWith("0x")||e.startsWith("0X"))try{return t.fromHex(e).bytes}catch{return null}if(/^[0-9a-fA-F]+$/.test(e)&&e.length%2==0)try{return t.fromHex(e).bytes}catch{return null}return null}encode(){return{type:this.type,value:void 0===this.value?m:this.toString()}}},g=class t{constructor(t){if(this.type="Bool",void 0!==t){if("boolean"!=typeof t)throw new Error("Bool value must be a boolean, got "+typeof t);this.value=t}else this.value=void 0}static parse(e){const n=e.trim().toLowerCase();if(""===n||n===m)return new t(void 0);if("true"===n)return new t(!0);if("false"===n)return new t(!1);throw new Error(`Cannot parse "${e}" as Bool`)}valueOf(){return this.value}toString(){return void 0===this.value?"undefined":this.value.toString()}equals(t){if(t.type!==this.type)return!1;const e=t;return this.value===e.value}encode(){return{type:this.type,value:void 0===this.value?m:this.toString()}}},U=class t{constructor(e){if(this.type="Date",void 0!==e)if(e instanceof Date){const t=e.getUTCFullYear(),n=e.getUTCMonth()+1,r=e.getUTCDate();this.months=12*t+(n-1),this.days=r}else if("string"==typeof e){const n=t.parseDate(e);if(!n)throw new Error(`Invalid date string: ${e}`);this.months=n.months,this.days=n.days}else{if("number"!=typeof e)throw new Error("Date value must be a Date, string, or number, got "+typeof e);{const n=t.fromDaysSinceEpochToComponents(e);if(!n)throw new Error(`Invalid days since epoch: ${e}`);this.months=n.months,this.days=n.days}}else this.months=void 0,this.days=void 0}static fromYMD(e,n,r){if(!t.isValidDate(e,n,r))throw new Error(`Invalid date: ${e}-${String(n).padStart(2,"0")}-${String(r).padStart(2,"0")}`);const i=new t(void 0);return i.months=12*e+(n-1),i.days=r,i}static today(){const e=new Date;return t.fromYMD(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate())}static parse(e){const n=e.trim();if(""===n||n===m)return new t(void 0);const r=t.parseDate(n);if(!r)throw new Error(`Cannot parse "${e}" as Date`);const i=new t(void 0);return i.months=r.months,i.days=r.days,i}toDaysSinceEpoch(){if(void 0===this.months||void 0===this.days)return;const t=Math.floor(this.months/12);let e=this.months%12;e<0&&(e+=12);const n=e+1;let r;t>=0&&t<100?(r=new Date(Date.UTC(2e3,n-1,this.days)),r.setUTCFullYear(t)):r=new Date(Date.UTC(t,n-1,this.days));const i=new Date(Date.UTC(1970,0,1)),s=r.getTime()-i.getTime();return Math.floor(s/864e5)}static fromDaysSinceEpochToComponents(t){const e=new Date(Date.UTC(1970,0,1)),n=24*t*60*60*1e3,r=new Date(e.getTime()+n);if(!isFinite(r.getTime()))return null;return{months:12*r.getUTCFullYear()+(r.getUTCMonth()+1-1),days:r.getUTCDate()}}year(){if(void 0!==this.months)return Math.floor(this.months/12)}month(){if(void 0===this.months)return;let t=this.months%12;return t<0&&(t+=12),t+1}day(){return this.days}toString(){if(void 0===this.months||void 0===this.days)return"undefined";const t=Math.floor(this.months/12);let e=this.months%12;e<0&&(e+=12);const n=String(e+1).padStart(2,"0"),r=String(this.days).padStart(2,"0");if(t<0){const e=Math.abs(t);return`-${String(e).padStart(4,"0")}-${n}-${r}`}return`${String(t).padStart(4,"0")}-${n}-${r}`}valueOf(){if(void 0===this.months||void 0===this.days)return;const t=Math.floor(this.months/12);let e=this.months%12;e<0&&(e+=12);const n=e+1;let r;return t>=0&&t<100?(r=new Date(Date.UTC(2e3,n-1,this.days)),r.setUTCFullYear(t)):r=new Date(Date.UTC(t,n-1,this.days)),r}get value(){return this.valueOf()}static parseDate(e){const n=e.match(/^(-?\d{1,4})-(\d{2})-(\d{2})$/);if(!n)return null;const r=parseInt(n[1],10),i=parseInt(n[2],10),s=parseInt(n[3],10);return i<1||i>12||s<1||s>31?null:t.isValidDate(r,i,s)?{months:12*r+(i-1),days:s}:null}static isValidDate(t,e,n){let r;return t>=0&&t<100?(r=new Date(Date.UTC(2e3,e-1,n)),r.setUTCFullYear(t)):r=new Date(Date.UTC(t,e-1,n)),r.getUTCFullYear()===t&&r.getUTCMonth()===e-1&&r.getUTCDate()===n}equals(t){if(t.type!==this.type)return!1;const e=t;return void 0===this.months||e.months,this.months===e.months&&this.days===e.days}encode(){return{type:this.type,value:void 0===this.value?m:this.toString()}}},I=class t{constructor(e){if(this.type="Time",void 0!==e)if("bigint"==typeof e){if(e<0n||e>=t.NANOS_PER_DAY)throw new Error(`Time value must be between 0 and ${t.NANOS_PER_DAY-1n} nanoseconds`);this.value=e}else if("string"==typeof e){const n=t.parseTime(e);if(null===n)throw new Error(`Invalid time string: ${e}`);this.value=n}else{if("number"!=typeof e)throw new Error("Time value must be a bigint, string, or number, got "+typeof e);{const n=BigInt(Math.floor(e));if(n<0n||n>=t.NANOS_PER_DAY)throw new Error(`Time value must be between 0 and ${t.NANOS_PER_DAY-1n} nanoseconds`);this.value=n}}else this.value=void 0}static fromHMSN(e,n,r,i=0){if(e<0||e>23)throw new Error(`Invalid hour: ${e}`);if(n<0||n>59)throw new Error(`Invalid minute: ${n}`);if(r<0||r>59)throw new Error(`Invalid second: ${r}`);if(i<0||i>999999999)throw new Error(`Invalid nanosecond: ${i}`);const s=BigInt(e)*t.NANOS_PER_HOUR+BigInt(n)*t.NANOS_PER_MINUTE+BigInt(r)*t.NANOS_PER_SECOND+BigInt(i);return new t(s)}static fromHMS(e,n,r){return t.fromHMSN(e,n,r,0)}static midnight(){return new t(0n)}static noon(){return new t(12n*t.NANOS_PER_HOUR)}static parse(e){const n=e.trim();if(""===n||n===m)return new t(void 0);const r=t.parseTime(n);if(null===r)throw new Error(`Cannot parse "${e}" as Time`);return new t(r)}hour(){if(void 0!==this.value)return Number(this.value/t.NANOS_PER_HOUR)}minute(){if(void 0===this.value)return;const e=this.value%t.NANOS_PER_HOUR;return Number(e/t.NANOS_PER_MINUTE)}second(){if(void 0===this.value)return;const e=this.value%t.NANOS_PER_HOUR%t.NANOS_PER_MINUTE;return Number(e/t.NANOS_PER_SECOND)}nanosecond(){if(void 0!==this.value)return Number(this.value%t.NANOS_PER_SECOND)}toNanosSinceMidnight(){return this.value}static fromNanosSinceMidnight(e){return new t("number"==typeof e?BigInt(e):e)}toString(){if(void 0===this.value)return"undefined";const t=this.hour(),e=this.minute(),n=this.second(),r=this.nanosecond();return`${String(t).padStart(2,"0")}:${String(e).padStart(2,"0")}:${String(n).padStart(2,"0")}.${String(r).padStart(9,"0")}`}valueOf(){return this.value}static parseTime(e){const n=e.match(/^(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,9}))?$/);if(!n)return null;const r=parseInt(n[1],10),i=parseInt(n[2],10),s=parseInt(n[3],10);let o=0;if(n[4]){const t=n[4].padEnd(9,"0").substring(0,9);o=parseInt(t,10)}if(r<0||r>23)return null;if(i<0||i>59)return null;if(s<0||s>59)return null;return BigInt(r)*t.NANOS_PER_HOUR+BigInt(i)*t.NANOS_PER_MINUTE+BigInt(s)*t.NANOS_PER_SECOND+BigInt(o)}equals(t){if(t.type!==this.type)return!1;const e=t;return this.value===e.value}encode(){return{type:this.type,value:void 0===this.value?m:this.toString()}}};I.NANOS_PER_SECOND=1000000000n,I.NANOS_PER_MINUTE=60000000000n,I.NANOS_PER_HOUR=3600000000000n,I.NANOS_PER_DAY=86400000000000n;var E=I,b=class t{constructor(e){if(this.type="DateTime",void 0!==e)if(e instanceof Date){const t=e.getUTCFullYear(),n=e.getUTCMonth()+1,r=e.getUTCDate(),i=e.getUTCHours(),s=e.getUTCMinutes(),o=e.getUTCSeconds(),a=e.getUTCMilliseconds();this.months=12*t+(n-1),this.days=r,this.nanos=3600000000000n*BigInt(i)+60000000000n*BigInt(s)+1000000000n*BigInt(o)+1000000n*BigInt(a)}else if("string"==typeof e){const n=t.parseDateTime(e);if(!n)throw new Error(`Invalid datetime string: ${e}`);this.months=n.months,this.days=n.days,this.nanos=n.nanos}else if("number"==typeof e){const t=new Date(e),n=t.getUTCFullYear(),r=t.getUTCMonth()+1,i=t.getUTCDate(),s=t.getUTCHours(),o=t.getUTCMinutes(),a=t.getUTCSeconds(),u=t.getUTCMilliseconds();this.months=12*n+(r-1),this.days=i,this.nanos=3600000000000n*BigInt(s)+60000000000n*BigInt(o)+1000000000n*BigInt(a)+1000000n*BigInt(u)}else{if("bigint"!=typeof e)throw new Error("DateTime value must be a Date, string, number, or bigint, got "+typeof e);{const t=Number(e/1000000n),n=e%1000000n,r=new Date(t),i=r.getUTCFullYear(),s=r.getUTCMonth()+1,o=r.getUTCDate(),a=r.getUTCHours(),u=r.getUTCMinutes(),h=r.getUTCSeconds(),l=r.getUTCMilliseconds();this.months=12*i+(s-1),this.days=o,this.nanos=3600000000000n*BigInt(a)+60000000000n*BigInt(u)+1000000000n*BigInt(h)+1000000n*BigInt(l)+n}}else this.months=void 0,this.days=void 0,this.nanos=void 0}static fromYMDHMSN(e,n,r,i,s,o,a=0){if(i<0||i>23)throw new Error(`Invalid hour: ${i}`);if(s<0||s>59)throw new Error(`Invalid minute: ${s}`);if(o<0||o>59)throw new Error(`Invalid second: ${o}`);if(a<0||a>999999999)throw new Error(`Invalid nanosecond: ${a}`);if(!t.isValidDate(e,n,r))throw new Error(`Invalid datetime: ${e}-${String(n).padStart(2,"0")}-${String(r).padStart(2,"0")} ${String(i).padStart(2,"0")}:${String(s).padStart(2,"0")}:${String(o).padStart(2,"0")}`);const u=new t(void 0);return u.months=12*e+(n-1),u.days=r,u.nanos=3600000000000n*BigInt(i)+60000000000n*BigInt(s)+1000000000n*BigInt(o)+BigInt(a),u}static fromYMDHMS(e,n,r,i,s,o){return t.fromYMDHMSN(e,n,r,i,s,o,0)}static fromTimestamp(e){return new t(1e3*e)}static fromTimestampMillis(e){return new t(e)}static fromNanosSinceEpoch(e){return new t(e)}static fromParts(e,n){if(n<0||n>999999999)throw new Error(`Invalid nanoseconds: ${n}`);const r=1e3*e+Math.floor(n/1e6),i=n%1e6,s=new t(r);return void 0!==s.nanos&&(s.nanos=s.nanos+BigInt(i)),s}static now(){return new t(new Date)}static default(){return t.fromYMDHMS(1970,1,1,0,0,0)}static parse(e){const n=e.trim();if(""===n||n===m)return new t(void 0);const r=t.parseDateTime(n);if(!r)throw new Error(`Cannot parse "${e}" as DateTime`);const i=new t(void 0);return i.months=r.months,i.days=r.days,i.nanos=r.nanos,i}timestamp(){const t=this.valueOf();if(void 0!==t)return Math.floor(t.getTime()/1e3)}timestampNanos(){const t=this.valueOf();if(void 0===t||void 0===this.nanos)return;return 1000000n*BigInt(t.getTime())+this.nanos%1000000n}toNanosSinceEpoch(){return this.timestampNanos()}toParts(){const t=this.valueOf();if(void 0===t||void 0===this.nanos)return;return[Math.floor(t.getTime()/1e3),1e6*(t.getTime()%1e3)+Number(this.nanos%1000000n)]}date(){if(void 0===this.months||void 0===this.days)return;const t=Math.floor(this.months/12);let e=this.months%12;e<0&&(e+=12);const n=e+1;return U.fromYMD(t,n,this.days)}time(){if(void 0!==this.nanos)return new E(this.nanos)}toString(){if(void 0===this.months||void 0===this.days||void 0===this.nanos)return"undefined";const t=Math.floor(this.months/12);let e=this.months%12;e<0&&(e+=12);const n=String(e+1).padStart(2,"0"),r=String(this.days).padStart(2,"0"),i=this.nanos,s=i%3600000000000n,o=s/60000000000n,a=s%60000000000n,u=a/1000000000n,h=a%1000000000n,l=String(Number(i/3600000000000n)).padStart(2,"0"),d=String(Number(o)).padStart(2,"0"),f=String(Number(u)).padStart(2,"0"),v=String(Number(h)).padStart(9,"0");let c;if(t<0){const e=Math.abs(t);c=`-${String(e).padStart(4,"0")}`}else c=String(t).padStart(4,"0");return`${c}-${n}-${r}T${l}:${d}:${f}.${v}Z`}valueOf(){if(void 0===this.months||void 0===this.days||void 0===this.nanos)return;const t=Math.floor(this.months/12);let e=this.months%12;e<0&&(e+=12);const n=e+1,r=this.nanos,i=Number(r/3600000000000n),s=r%3600000000000n,o=Number(s/60000000000n),a=s%60000000000n,u=Number(a/1000000000n),h=Number(a%1000000000n/1000000n);let l;return t>=0&&t<100?(l=new Date(Date.UTC(2e3,n-1,this.days,i,o,u,h)),l.setUTCFullYear(t)):l=new Date(Date.UTC(t,n-1,this.days,i,o,u,h)),l}get value(){return this.valueOf()}static parseDateTime(e){const n=e.match(/^(-?\d{1,4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,9}))?Z$/);if(!n)return null;const r=parseInt(n[1],10),i=parseInt(n[2],10),s=parseInt(n[3],10),o=parseInt(n[4],10),a=parseInt(n[5],10),u=parseInt(n[6],10);let h=0n;if(n[7]){const t=n[7].padEnd(9,"0").substring(0,9);h=BigInt(t)}if(i<1||i>12)return null;if(s<1||s>31)return null;if(o<0||o>23)return null;if(a<0||a>59)return null;if(u<0||u>59)return null;if(!t.isValidDate(r,i,s))return null;return{months:12*r+(i-1),days:s,nanos:3600000000000n*BigInt(o)+60000000000n*BigInt(a)+1000000000n*BigInt(u)+h}}static isValidDate(t,e,n){let r;return t>=0&&t<100?(r=new Date(Date.UTC(2e3,e-1,n)),r.setUTCFullYear(t)):r=new Date(Date.UTC(t,e-1,n)),r.getUTCFullYear()===t&&r.getUTCMonth()===e-1&&r.getUTCDate()===n}equals(t){if(t.type!==this.type)return!1;const e=t;return void 0===this.months||e.months,this.months===e.months&&this.days===e.days&&this.nanos===e.nanos}encode(){return{type:this.type,value:void 0===this.value?m:this.toString()}}},A=class t{constructor(e){if(this.type="Float4",void 0!==e){if("number"!=typeof e)throw new Error("Float4 value must be a number, got "+typeof e);if(Number.isNaN(e)||!Number.isFinite(e))this.value=void 0;else if(0!==e&&Math.abs(e)<t.MIN_POSITIVE)this.value=0;else{if(e>t.MAX_VALUE)throw new Error(`Float4 overflow: value ${e} exceeds maximum ${t.MAX_VALUE}`);if(e<t.MIN_VALUE)throw new Error(`Float4 underflow: value ${e} exceeds minimum ${t.MIN_VALUE}`);{const t=new Float32Array(1);t[0]=e,this.value=t[0]}}}else this.value=void 0}static parse(e){const n=e.trim();if(""===n||n===m)return new t(void 0);const r=Number(n);if(Number.isNaN(r)&&"nan"!==n.toLowerCase())throw new Error(`Cannot parse "${e}" as Float4`);return new t(r)}valueOf(){return this.value}toString(){return void 0===this.value?"undefined":this.value.toString()}equals(t){if(t.type!==this.type)return!1;const e=t;if(void 0===this.value||void 0===e.value)return this.value===e.value;return Math.abs(this.value-e.value)<=1e-6}encode(){return{type:this.type,value:void 0===this.value?m:this.toString()}}};A.MAX_VALUE=34028235e31,A.MIN_VALUE=-34028235e31,A.MIN_POSITIVE=1175494e-44;var S=A,N=class t{constructor(t){if(this.type="Float8",void 0!==t){if("number"!=typeof t)throw new Error("Float8 value must be a number, got "+typeof t);this.value=t}else this.value=void 0}static parse(e){const n=e.trim();if(""===n||n===m)return new t(void 0);const r=Number(n);if(Number.isNaN(r)&&"nan"!==n.toLowerCase())throw new Error(`Cannot parse "${e}" as Float8`);return new t(r)}valueOf(){return this.value}toString(){return void 0===this.value?"undefined":this.value.toString()}equals(t){if(t.type!==this.type)return!1;const e=t;return this.value===e.value}encode(){return{type:this.type,value:void 0===this.value?m:this.toString()}}},$=class t{constructor(e){if(this.type="Int1",void 0!==e){if(!Number.isInteger(e))throw new Error(`Int1 value must be an integer, got ${e}`);if(e<t.MIN_VALUE||e>t.MAX_VALUE)throw new Error(`Int1 value must be between ${t.MIN_VALUE} and ${t.MAX_VALUE}, got ${e}`)}this.value=e}static parse(e){const n=e.trim();if(""===n||n===m)return new t(void 0);const r=Number(n);if(isNaN(r))throw new Error(`Cannot parse "${e}" as Int1`);return new t(r)}valueOf(){return this.value}toString(){return void 0===this.value?"undefined":this.value.toString()}equals(t){if(t.type!==this.type)return!1;const e=t;return this.value===e.value}encode(){return{type:this.type,value:void 0===this.value?m:this.toString()}}};$.MIN_VALUE=-128,$.MAX_VALUE=127;var M=$,_=class t{constructor(e){if(this.type="Int2",void 0!==e){if(!Number.isInteger(e))throw new Error(`Int2 value must be an integer, got ${e}`);if(e<t.MIN_VALUE||e>t.MAX_VALUE)throw new Error(`Int2 value must be between ${t.MIN_VALUE} and ${t.MAX_VALUE}, got ${e}`)}this.value=e}static parse(e){const n=e.trim();if(""===n||n===m)return new t(void 0);const r=Number(n);if(isNaN(r))throw new Error(`Cannot parse "${e}" as Int2`);return new t(r)}valueOf(){return this.value}toString(){return void 0===this.value?"undefined":this.value.toString()}equals(t){if(t.type!==this.type)return!1;const e=t;return this.value===e.value}encode(){return{type:this.type,value:void 0===this.value?m:this.toString()}}};_.MIN_VALUE=-32768,_.MAX_VALUE=32767;var D=_,L=class t{constructor(e){if(this.type="Int4",void 0!==e){if(!Number.isInteger(e))throw new Error(`Int4 value must be an integer, got ${e}`);if(e<t.MIN_VALUE||e>t.MAX_VALUE)throw new Error(`Int4 value must be between ${t.MIN_VALUE} and ${t.MAX_VALUE}, got ${e}`)}this.value=e}static parse(e){const n=e.trim();if(""===n||n===m)return new t(void 0);const r=Number(n);if(isNaN(r))throw new Error(`Cannot parse "${e}" as Int4`);return new t(r)}valueOf(){return this.value}toString(){return void 0===this.value?"undefined":this.value.toString()}equals(t){if(t.type!==this.type)return!1;const e=t;return this.value===e.value}encode(){return{type:this.type,value:void 0===this.value?m:this.toString()}}};L.MIN_VALUE=-2147483648,L.MAX_VALUE=2147483647;var V=L,T=class t{constructor(e){if(this.type="Int8",void 0!==e){const n="number"==typeof e?BigInt(Math.trunc(e)):e;if(n<t.MIN_VALUE||n>t.MAX_VALUE)throw new Error(`Int8 value must be between ${t.MIN_VALUE} and ${t.MAX_VALUE}, got ${n}`);this.value=n}else this.value=void 0}static parse(e){const n=e.trim();if(""===n||n===m)return new t(void 0);let r;try{r=BigInt(n)}catch(i){throw new Error(`Cannot parse "${e}" as Int8`)}if(r<t.MIN_VALUE||r>t.MAX_VALUE)throw new Error(`Int8 value must be between ${t.MIN_VALUE} and ${t.MAX_VALUE}, got ${r}`);return new t(r)}valueOf(){return this.value}toString(){return void 0===this.value?"undefined":this.value.toString()}equals(t){if(t.type!==this.type)return!1;const e=t;return this.value===e.value}encode(){return{type:this.type,value:void 0===this.value?m:this.toString()}}};T.MIN_VALUE=BigInt("-9223372036854775808"),T.MAX_VALUE=BigInt("9223372036854775807");var B=T,C=class t{constructor(e){if(this.type="Int16",void 0!==e){let r;if("string"==typeof e)try{r=BigInt(e)}catch(n){throw new Error(`Int16 value must be a valid integer, got ${e}`)}else r="number"==typeof e?BigInt(Math.trunc(e)):e;if(r<t.MIN_VALUE||r>t.MAX_VALUE)throw new Error(`Int16 value must be between ${t.MIN_VALUE} and ${t.MAX_VALUE}, got ${r}`);this.value=r}else this.value=void 0}static parse(e){const n=e.trim();if(""===n||n===m)return new t(void 0);let r;try{r=BigInt(n)}catch(i){throw new Error(`Cannot parse "${e}" as Int16`)}if(r<t.MIN_VALUE||r>t.MAX_VALUE)throw new Error(`Int16 value must be between ${t.MIN_VALUE} and ${t.MAX_VALUE}, got ${r}`);return new t(r)}valueOf(){return this.value}toString(){return void 0===this.value?"undefined":this.value.toString()}equals(t){if(t.type!==this.type)return!1;const e=t;return this.value===e.value}encode(){return{type:this.type,value:void 0===this.value?m:this.toString()}}};C.MIN_VALUE=BigInt("-170141183460469231731687303715884105728"),C.MAX_VALUE=BigInt("170141183460469231731687303715884105727");var O=C,R=class t{constructor(e){if(this.type="Interval",void 0!==e)if("string"==typeof e){const n=t.parseDuration(e);if(!n)throw new Error(`Invalid interval string: ${e}`);this.months=n.months,this.days=n.days,this.nanos=n.nanos}else{if("object"!=typeof e||null===e)throw new Error("Interval value must be an object or string, got "+typeof e);this.months=e.months,this.days=e.days,this.nanos=e.nanos}else this.months=void 0,this.days=void 0,this.nanos=void 0}static new(e,n,r){return new t({months:e,days:n,nanos:r})}static fromSeconds(e){return new t({months:0,days:0,nanos:1000000000n*BigInt(e)})}static fromMilliseconds(e){return new t({months:0,days:0,nanos:1000000n*BigInt(e)})}static fromMicroseconds(e){return new t({months:0,days:0,nanos:1000n*BigInt(e)})}static fromNanoseconds(e){return new t({months:0,days:0,nanos:e})}static fromMinutes(e){return new t({months:0,days:0,nanos:60n*BigInt(e)*1000000000n})}static fromHours(e){return new t({months:0,days:0,nanos:60n*BigInt(e)*60n*1000000000n})}static fromDays(e){return new t({months:0,days:e,nanos:0n})}static fromWeeks(e){return new t({months:0,days:7*e,nanos:0n})}static fromMonths(e){return new t({months:e,days:0,nanos:0n})}static fromYears(e){return new t({months:12*e,days:0,nanos:0n})}static zero(){return new t({months:0,days:0,nanos:0n})}static default(){return t.zero()}static parse(e){const n=e.trim();if(""===n||n===m)return new t(void 0);const r=t.parseDuration(n);if(!r)throw new Error(`Cannot parse "${e}" as Interval`);return new t({months:r.months,days:r.days,nanos:r.nanos})}seconds(){if(void 0!==this.nanos)return this.nanos/1000000000n}milliseconds(){if(void 0!==this.nanos)return this.nanos/1000000n}microseconds(){if(void 0!==this.nanos)return this.nanos/1000n}nanoseconds(){return this.nanos}getMonths(){return this.months}getDays(){return this.days}getNanos(){return this.nanos}isPositive(){return void 0!==this.months&&void 0!==this.days&&void 0!==this.nanos&&(this.months>0||this.days>0||this.nanos>0n)}isNegative(){return void 0!==this.months&&void 0!==this.days&&void 0!==this.nanos&&(this.months<0||this.days<0||this.nanos<0n)}abs(){return void 0===this.months||void 0===this.days||void 0===this.nanos?new t(void 0):new t({months:Math.abs(this.months),days:Math.abs(this.days),nanos:this.nanos<0n?-this.nanos:this.nanos})}negate(){return void 0===this.months||void 0===this.days||void 0===this.nanos?new t(void 0):new t({months:-this.months,days:-this.days,nanos:-this.nanos})}toString(){if(void 0===this.months||void 0===this.days||void 0===this.nanos)return"undefined";if(0===this.months&&0===this.days&&0n===this.nanos)return"PT0S";let t="P";const e=Math.floor(this.months/12),n=this.months%12;0!==e&&(t+=`${e}Y`),0!==n&&(t+=`${n}M`);const r=this.nanos/1000000000n,i=this.nanos%1000000000n,s=r/86400n,o=r%86400n,a=this.days+Number(s),u=o/3600n,h=o%3600n/60n,l=o%60n;if(0!==a&&(t+=`${a}D`),(0n!==u||0n!==h||0n!==l||0n!==i)&&(t+="T",0n!==u&&(t+=`${u}H`),0n!==h&&(t+=`${h}M`),0n!==l||0n!==i))if(0n!==i){const e=Number(i)/1e9;t+=`${(Number(l)+e).toFixed(9).replace(/0+$/,"").replace(/\.$/,"")}S`}else t+=`${l}S`;return t}valueOf(){if(void 0!==this.months&&void 0!==this.days&&void 0!==this.nanos)return{months:this.months,days:this.days,nanos:this.nanos}}get value(){return this.valueOf()}static parseDuration(t){const e=t.startsWith("-"),n=e?t.substring(1):t;if(!n.startsWith("P"))return null;const r=n.match(/^P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d+(?:\.\d+)?)S)?)?$/);if(!r)return null;if(!(r[1]||r[2]||r[3]||r[4]||r[5]||r[6]))return null;const i=parseInt(r[1]||"0",10),s=parseInt(r[2]||"0",10),o=parseInt(r[3]||"0",10),a=parseInt(r[4]||"0",10),u=parseInt(r[5]||"0",10),h=(r[6]||"0").split("."),l=parseInt(h[0]||"0",10);let d=0n;if(h.length>1){const t=h[1].padEnd(9,"0").substring(0,9);d=BigInt(t)}const f=3600n*BigInt(a)*1000000000n+60n*BigInt(u)*1000000000n+1000000000n*BigInt(l)+d,v=12*i+s;return e?{months:-v,days:-o,nanos:-f}:{months:v,days:o,nanos:f}}equals(t){if(t.type!==this.type)return!1;const e=t;return void 0===this.months||e.months,this.months===e.months&&this.days===e.days&&this.nanos===e.nanos}encode(){return{type:this.type,value:void 0===this.value?m:this.toString()}}},X=class t{constructor(e){if(this.type="Uint1",void 0!==e){if(!Number.isInteger(e))throw new Error(`Uint1 value must be an integer, got ${e}`);if(e<t.MIN_VALUE||e>t.MAX_VALUE)throw new Error(`Uint1 value must be between ${t.MIN_VALUE} and ${t.MAX_VALUE}, got ${e}`)}this.value=e}static parse(e){const n=e.trim();if(""===n||n===m)return new t(void 0);const r=Number(n);if(isNaN(r))throw new Error(`Cannot parse "${e}" as Uint1`);return new t(r)}valueOf(){return this.value}toString(){return void 0===this.value?"undefined":this.value.toString()}equals(t){if(t.type!==this.type)return!1;const e=t;return this.value===e.value}encode(){return{type:this.type,value:void 0===this.value?m:this.toString()}}};X.MIN_VALUE=0,X.MAX_VALUE=255;var P=X,q=class t{constructor(e){if(this.type="Uint2",void 0!==e){if(!Number.isInteger(e))throw new Error(`Uint2 value must be an integer, got ${e}`);if(e<t.MIN_VALUE||e>t.MAX_VALUE)throw new Error(`Uint2 value must be between ${t.MIN_VALUE} and ${t.MAX_VALUE}, got ${e}`)}this.value=e}static parse(e){const n=e.trim();if(""===n||n===m)return new t(void 0);const r=Number(n);if(isNaN(r))throw new Error(`Cannot parse "${e}" as Uint2`);return new t(r)}valueOf(){return this.value}toString(){return void 0===this.value?"undefined":this.value.toString()}equals(t){if(t.type!==this.type)return!1;const e=t;return this.value===e.value}encode(){return{type:this.type,value:void 0===this.value?m:this.toString()}}};q.MIN_VALUE=0,q.MAX_VALUE=65535;var F=q,H=class t{constructor(e){if(this.type="Uint4",void 0!==e){if(!Number.isInteger(e))throw new Error(`Uint4 value must be an integer, got ${e}`);if(e<t.MIN_VALUE||e>t.MAX_VALUE)throw new Error(`Uint4 value must be between ${t.MIN_VALUE} and ${t.MAX_VALUE}, got ${e}`)}this.value=e}static parse(e){const n=e.trim();if(""===n||n===m)return new t(void 0);const r=Number(n);if(isNaN(r))throw new Error(`Cannot parse "${e}" as Uint4`);return new t(r)}valueOf(){return this.value}toString(){return void 0===this.value?"undefined":this.value.toString()}equals(t){if(t.type!==this.type)return!1;const e=t;return this.value===e.value}encode(){return{type:this.type,value:void 0===this.value?m:this.toString()}}};H.MIN_VALUE=0,H.MAX_VALUE=4294967295;var Y=H,x=class t{constructor(e){if(this.type="Uint8",void 0!==e){const n="number"==typeof e?BigInt(Math.trunc(e)):e;if(n<t.MIN_VALUE||n>t.MAX_VALUE)throw new Error(`Uint8 value must be between ${t.MIN_VALUE} and ${t.MAX_VALUE}, got ${n}`);this.value=n}else this.value=void 0}static parse(e){const n=e.trim();if(""===n||n===m)return new t(void 0);let r;try{r=BigInt(n)}catch(i){throw new Error(`Cannot parse "${e}" as Uint8`)}if(r<t.MIN_VALUE||r>t.MAX_VALUE)throw new Error(`Uint8 value must be between ${t.MIN_VALUE} and ${t.MAX_VALUE}, got ${r}`);return new t(r)}valueOf(){return this.value}toNumber(){if(void 0!==this.value)return Number(this.value)}toString(){return void 0===this.value?"undefined":this.value.toString()}equals(t){if(t.type!==this.type)return!1;const e=t;return this.value===e.value}encode(){return{type:this.type,value:void 0===this.value?m:this.toString()}}};x.MIN_VALUE=BigInt(0),x.MAX_VALUE=BigInt("18446744073709551615");var k=x,j=class t{constructor(e){if(this.type="Uint16",void 0!==e){let r;if("string"==typeof e)try{r=BigInt(e)}catch(n){throw new Error(`Uint16 value must be a valid integer, got ${e}`)}else r="number"==typeof e?BigInt(Math.trunc(e)):e;if(r<t.MIN_VALUE||r>t.MAX_VALUE)throw new Error(`Uint16 value must be between ${t.MIN_VALUE} and ${t.MAX_VALUE}, got ${r}`);this.value=r}else this.value=void 0}static parse(e){const n=e.trim();if(""===n||n===m)return new t(void 0);let r;try{r=BigInt(n)}catch(i){throw new Error(`Cannot parse "${e}" as Uint16`)}if(r<t.MIN_VALUE||r>t.MAX_VALUE)throw new Error(`Uint16 value must be between ${t.MIN_VALUE} and ${t.MAX_VALUE}, got ${r}`);return new t(r)}valueOf(){return this.value}toString(){return void 0===this.value?"undefined":this.value.toString()}equals(t){if(t.type!==this.type)return!1;const e=t;return this.value===e.value}encode(){return{type:this.type,value:void 0===this.value?m:this.toString()}}};j.MIN_VALUE=BigInt(0),j.MAX_VALUE=BigInt("340282366920938463463374607431768211455");var W=j,Z=class t{constructor(e){if(this.type="RowNumber",void 0!==e){const n="number"==typeof e?BigInt(Math.trunc(e)):e;if(n<t.MIN_VALUE||n>t.MAX_VALUE)throw new Error(`RowNumber value must be between ${t.MIN_VALUE} and ${t.MAX_VALUE}, got ${n}`);this.value=n}else this.value=void 0}static parse(e){const n=e.trim();if(""===n||n===m)return new t(void 0);let r;try{r=BigInt(n)}catch(i){throw new Error(`Cannot parse "${e}" as RowNumber`)}if(r<t.MIN_VALUE||r>t.MAX_VALUE)throw new Error(`RowNumber value must be between ${t.MIN_VALUE} and ${t.MAX_VALUE}, got ${r}`);return new t(r)}valueOf(){return this.value}toString(){return void 0===this.value?"undefined":this.value.toString()}equals(t){if(t.type!==this.type)return!1;const e=t;return this.value===e.value}encode(){return{type:this.type,value:void 0===this.value?m:this.toString()}}};Z.MIN_VALUE=BigInt(0),Z.MAX_VALUE=BigInt("18446744073709551615");var z=Z,J=class t{constructor(){this.type="Undefined"}static new(){return new t}static default(){return new t}static parse(e){const n=e.trim();if(""===n||n===m||"undefined"===n)return new t;throw new Error(`Cannot parse "${e}" as Undefined`)}isUndefined(){return!0}toString(){return"undefined"}valueOf(){}get value(){}equals(t){return t.type===this.type}compare(t){return 0}encode(){return{type:this.type,value:void 0===this.value?m:this.toString()}}},K=class t{constructor(t){if(this.type="Utf8",void 0!==t){if("string"!=typeof t)throw new Error("Utf8 value must be a string, got "+typeof t);this.value=t}else this.value=void 0}static parse(e){return new t(e===m?void 0:e)}valueOf(){return this.value}toString(){return void 0===this.value?"undefined":this.value}equals(t){if(t.type!==this.type)return!1;const e=t;return this.value===e.value}encode(){return{type:this.type,value:void 0===this.value?m:this.toString()}}},Q=class t{constructor(t){if(this.type="Uuid4",void 0!==t){if("string"!=typeof t)throw new Error("Uuid4 value must be a string, got "+typeof t);if(!i(t))throw new Error(`Invalid UUID format: ${t}`);const e=s(t);if(t!==o&&4!==e)throw new Error(`Invalid UUID version for Uuid4: expected v4, got v${e}`);this.uuid=t.toLowerCase()}else this.uuid=void 0}static generate(){return new t(v())}static new(e){return new t(e)}static nil(){return new t(o)}static default(){return t.nil()}static parse(e){const n=e.trim();if(""===n||n===m)return new t(void 0);if(!i(n))throw new Error(`Cannot parse "${e}" as Uuid4`);const r=s(n);if(n!==o&&4!==r)throw new Error(`Cannot parse "${e}" as Uuid4: wrong version (v${r})`);return new t(n)}asString(){return this.uuid}asBytes(){if(void 0===this.uuid)return;const t=this.uuid.replace(/-/g,""),e=new Uint8Array(16);for(let n=0;n<16;n++)e[n]=parseInt(t.substring(2*n,2*n+2),16);return e}isNil(){return this.uuid===o}getVersion(){if(void 0!==this.uuid)return s(this.uuid)}toString(){return void 0===this.uuid?"undefined":this.uuid}valueOf(){return this.uuid}get value(){return this.valueOf()}equals(t){if(t.type!==this.type)return!1;const e=t;return this.uuid===e.uuid}compare(t){if(void 0===this.uuid||void 0===t.uuid)return this.uuid===t.uuid?0:void 0===this.uuid?-1:1;const e=this.asBytes(),n=t.asBytes();for(let r=0;r<16;r++){if(e[r]<n[r])return-1;if(e[r]>n[r])return 1}return 0}encode(){return{type:this.type,value:void 0===this.value?m:this.toString()}}},G=class t{constructor(t){if(this.type="Uuid7",void 0!==t){if("string"!=typeof t)throw new Error("Uuid7 value must be a string, got "+typeof t);if(!i(t))throw new Error(`Invalid UUID format: ${t}`);const e=s(t);if(t!==o&&7!==e)throw new Error(`Invalid UUID version for Uuid7: expected v7, got v${e}`);this.uuid=t.toLowerCase()}else this.uuid=void 0}static generate(){return new t(y())}static new(e){return new t(e)}static nil(){return new t(o)}static default(){return t.nil()}static parse(e){const n=e.trim();if(""===n||n===m)return new t(void 0);if(!i(n))throw new Error(`Cannot parse "${e}" as Uuid7`);const r=s(n);if(n!==o&&7!==r)throw new Error(`Cannot parse "${e}" as Uuid7: wrong version (v${r})`);return new t(n)}asString(){return this.uuid}asBytes(){if(void 0===this.uuid)return;const t=this.uuid.replace(/-/g,""),e=new Uint8Array(16);for(let n=0;n<16;n++)e[n]=parseInt(t.substring(2*n,2*n+2),16);return e}getTimestamp(){if(void 0===this.uuid||this.uuid===o)return;const t=this.uuid.replace(/-/g,"").substring(0,12);return parseInt(t,16)}isNil(){return this.uuid===o}getVersion(){if(void 0!==this.uuid)return s(this.uuid)}toString(){return void 0===this.uuid?"undefined":this.uuid}valueOf(){return this.uuid}get value(){return this.valueOf()}equals(t){if(t.type!==this.type)return!1;const e=t;return this.uuid===e.uuid}compare(t){if(void 0===this.uuid||void 0===t.uuid)return this.uuid===t.uuid?0:void 0===this.uuid?-1:1;const e=this.asBytes(),n=t.asBytes();for(let r=0;r<16;r++){if(e[r]<n[r])return-1;if(e[r]>n[r])return 1}return 0}encode(){return{type:this.type,value:void 0===this.value?m:this.toString()}}},tt=class t{constructor(t){if(this.type="IdentityId",void 0!==t){if("string"!=typeof t)throw new Error("IdentityId value must be a string, got "+typeof t);if(!i(t))throw new Error(`Invalid UUID format for IdentityId: ${t}`);const e=s(t);if(t!==o&&7!==e)throw new Error(`Invalid UUID version for IdentityId: expected v7, got v${e}`);this.value=t.toLowerCase()}else this.value=void 0}static generate(){return new t(y())}static nil(){return new t(o)}static parse(e){const n=e.trim();if(""===n||n===m)return new t(void 0);if(!i(n))throw new Error(`Cannot parse "${e}" as IdentityId`);const r=s(n);if(n!==o&&7!==r)throw new Error(`Cannot parse "${e}" as IdentityId: wrong UUID version (v${r})`);return new t(n)}valueOf(){return this.value}toString(){return void 0===this.value?"undefined":this.value}getTimestamp(){if(void 0===this.value||this.value===o)return;const t=this.value.replace(/-/g,"").substring(0,12);return parseInt(t,16)}isNil(){return this.value===o}equals(t){if(t.type!==this.type)return!1;const e=t;return this.value===e.value}encode(){return{type:this.type,value:void 0===this.value?m:this.toString()}}};function et(t){switch(t.type){case"Blob":return w.parse(t.value);case"Bool":return g.parse(t.value);case"Date":return U.parse(t.value);case"DateTime":return b.parse(t.value);case"Float4":return S.parse(t.value);case"Float8":return N.parse(t.value);case"Int1":return M.parse(t.value);case"Int2":return D.parse(t.value);case"Int4":return V.parse(t.value);case"Int8":return B.parse(t.value);case"Int16":return O.parse(t.value);case"Interval":return R.parse(t.value);case"RowNumber":return z.parse(t.value);case"Time":return E.parse(t.value);case"Uint1":return P.parse(t.value);case"Uint2":return F.parse(t.value);case"Uint4":return Y.parse(t.value);case"Uint8":return k.parse(t.value);case"Uint16":return W.parse(t.value);case"Undefined":return J.parse(t.value);case"Utf8":return K.parse(t.value);case"Uuid4":return Q.parse(t.value);case"Uuid7":return G.parse(t.value);case"IdentityId":return tt.parse(t.value);default:throw new Error(`Unsupported type: ${t.type}`)}}var nt=class extends Error{constructor(t){const e=t.payload.diagnostic;super(`[${e.code}] ${e.message}`+(e.label?` \u2014 ${e.label}`:"")),this.name="ReifyError",this.code=e.code,this.statement=e.statement,this.column=e.column,this.span=e.span,this.label=e.label,this.help=e.help,this.notes=e.notes??[],this.cause=e.cause,Object.setPrototypeOf(this,new.target.prototype)}toString(){const t=this.span?`line ${this.span.line}, offset ${this.span.offset}`:"unknown position",e=this.notes.length?`\nNotes:\n- ${this.notes.join("\n- ")}`:"",n=this.help?`\nHelp: ${this.help}`:"";return`${this.name}: ${this.message}\nAt ${t}${n}${e}`}}},4462:(t,e,n)=>{n.d(e,{Kj:()=>a});var r=n(3687);function i(t){if(null==t)return{type:"Undefined",value:r.HP};if(t&&"object"==typeof t&&"encode"in t&&"function"==typeof t.encode)return t.encode();if("boolean"==typeof t)return{type:"Bool",value:t.toString()};if("number"==typeof t)return Number.isInteger(t)?t>=-128&&t<=127?{type:"Int1",value:t.toString()}:t>=-32768&&t<=32767?{type:"Int2",value:t.toString()}:t>=-2147483648&&t<=2147483647?{type:"Int4",value:t.toString()}:{type:"Int8",value:t.toString()}:{type:"Float8",value:t.toString()};if("string"==typeof t){if(/^[0-9a-f]{8}-[0-9a-f]{4}-[47][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)){const e=t[14];if("4"===e)return{type:"Uuid4",value:t};if("7"===e)return{type:"Uuid7",value:t}}return{type:"Utf8",value:t}}if("bigint"==typeof t)return t>=BigInt(0)?t<=BigInt(255)?{type:"Uint1",value:t.toString()}:t<=BigInt(65535)?{type:"Uint2",value:t.toString()}:t<=BigInt(4294967295)?{type:"Uint4",value:t.toString()}:t<=BigInt("18446744073709551615")?{type:"Uint8",value:t.toString()}:{type:"Uint16",value:t.toString()}:t>=BigInt("-9223372036854775808")?{type:"Int8",value:t.toString()}:{type:"Int16",value:t.toString()};if(t instanceof Date)return{type:"DateTime",value:t.toISOString()};if(t instanceof Uint8Array){return{type:"Blob",value:"0x"+Array.from(t).map(t=>t.toString(16).padStart(2,"0")).join("")}}if(t instanceof ArrayBuffer){const e=new Uint8Array(t);return{type:"Blob",value:"0x"+Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")}}throw new Error(`Cannot encode value of type ${typeof t}: ${t}`)}function s(t){if(null==t)return[];if(Array.isArray(t))return t.map(t=>i(t));if("object"==typeof t){const e={};for(const[n,r]of Object.entries(t))e[n]=i(r);return e}throw new Error("Invalid parameters type: expected array or object, got "+typeof t)}var o=class t{constructor(t,e){this.pending=new Map,this.options=e,this.nextId=1,this.socket=t,this.socket.onmessage=t=>{const e=JSON.parse(t.data),{id:n,type:r,payload:i}=e,s=this.pending.get(n);s&&(this.pending.delete(n),s({id:n,type:r,payload:i}))},this.socket.onerror=t=>{console.error("WebSocket error",t)}}static async connect(e){const r=await async function(t){return"undefined"!=typeof window&&void 0!==window.WebSocket?new WebSocket(t):new((await n.e(7607).then(n.t.bind(n,7607,19))).WebSocket)(t)}(e.url);return r.readyState!==r.OPEN&&await new Promise((t,e)=>{const n=()=>{r.removeEventListener("open",n),r.removeEventListener("error",i),t()},i=()=>{r.removeEventListener("open",n),r.removeEventListener("error",i),e(new Error("WebSocket connection failed"))};r.addEventListener("open",n),r.addEventListener("error",i)}),r.send('{"id":"reifydb-auth-1","type":"Auth","payload":{"token":"mysecrettoken"}}'),new t(r,e)}async command(t,e,n){const r="req-"+this.nextId++,i=Array.isArray(t)?t:[t],o=null!=e?s(e):void 0;return(await this.send({id:r,type:"Command",payload:{statements:i,params:o}})).map((t,e)=>{const r=n[e];return r?t.map(t=>this.transformResult(t,r)):t})}async query(t,e,n){const r="req-"+this.nextId++,i=Array.isArray(t)?t:[t],o=null!=e?s(e):void 0;return(await this.send({id:r,type:"Query",payload:{statements:i,params:o}})).map((t,e)=>{const r=n[e];return r?t.map(t=>this.transformResult(t,r)):t})}async send(t){const e=t.id,n=await new Promise((n,r)=>{const i=setTimeout(()=>{this.pending.delete(e),r(new Error("ReifyDB query timeout"))},this.options.timeoutMs);this.pending.set(e,t=>{clearTimeout(i),n(t)}),this.socket.send(JSON.stringify(t))});if("Err"===n.type)throw new r.WE(n);if(n.type!==t.type)throw new Error(`Unexpected response type: ${n.type}`);return n.payload.frames.map(t=>function(t){const e=t[0]?.data.length??0;return Array.from({length:e},(e,n)=>{const i={};for(const s of t)i[s.name]=(0,r.D4)({type:s.ty,value:s.data[n]});return i})}(t.columns))}transformResult(t,e){if(e&&"object"===e.kind&&e.properties){const n={};for(const[r,i]of Object.entries(t)){const t=e.properties[r];if(t&&"primitive"===t.kind)if(i&&"object"==typeof i&&"value"in i){const e=i.value;"RowNumber"===t.type&&"number"==typeof e?n[r]=BigInt(e):n[r]=e}else n[r]=i;else t&&"value"===t.kind?n[r]=i:n[r]=t?this.transformResult(i,t):i}return n}if(e&&"primitive"===e.kind){if(t&&"object"==typeof t&&"value"in t){const n=t.value;return"RowNumber"===e.type&&"number"==typeof n?BigInt(n):n}return t}if(e&&"value"===e.kind)return t;if(e&&"array"===e.kind)return Array.isArray(t)?t.map(t=>this.transformResult(t,e.items)):t;if(e&&"optional"===e.kind){if(null==t)return;return this.transformResult(t,e.schema)}return t}disconnect(){this.socket.close()}};var a=class{static async connect_ws(t,e={}){return o.connect({url:t,...e})}}}}]);