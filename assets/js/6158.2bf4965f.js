"use strict";(self.webpackChunkreifydb_docs=self.webpackChunkreifydb_docs||[]).push([[6158],{6158:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var r=n(9729),o=n(8655);const u="editorContainer_ZKv7";var a=n(5813);const s=(0,r.forwardRef)(({value:e,onChange:t,onExecute:n,language:s="sql",theme:i="vs",readOnly:d=!1},l)=>{const c=(0,r.useRef)(null),m=(0,r.useRef)(null),E=(0,r.useRef)(n);(0,r.useEffect)(()=>{E.current=n},[n]),(0,r.useEffect)(()=>{m.current&&i&&m.current.editor.setTheme(i)},[i]),(0,r.useImperativeHandle)(l,()=>({setValue:e=>{c.current&&c.current.setValue(e)},getValue:()=>c.current?.getValue()||"",focus:()=>{c.current?.focus()}}));return(0,a.jsx)("div",{className:u,onMouseEnter:()=>{c.current?.focus()},children:(0,a.jsx)(o.Ay,{height:"100%",language:s,theme:i,value:e,onChange:e=>t(e||""),beforeMount:e=>{if(e&&e.editor)try{e.editor.setTheme(i)}catch(t){}},onMount:(e,t)=>{c.current=e,m.current=t,t.editor.setTheme(i||"vs"),e.focus(),t.languages.registerCompletionItemProvider("sql",{provideCompletionItems:(e,n)=>{const r=e.getWordUntilPosition(n),o={startLineNumber:n.lineNumber,endLineNumber:n.lineNumber,startColumn:r.startColumn,endColumn:r.endColumn};return{suggestions:[...["REIFY","FLOW","STREAM","MATERIALIZE"].map(e=>({label:e,kind:t.languages.CompletionItemKind.Keyword,insertText:e,documentation:`ReifyDB keyword: ${e}`,range:o})),...["MAP","FROM","WHERE","INSERT","UPDATE","DELETE","CREATE","DROP","ALTER","TABLE","INDEX","VIEW","JOIN","LEFT","RIGHT","INNER","OUTER","ON","GROUP BY","ORDER BY","HAVING","LIMIT","OFFSET"].map(e=>({label:e,kind:t.languages.CompletionItemKind.Keyword,insertText:e,range:o})),...["COUNT","SUM","AVG","MIN","MAX","NOW","CURRENT_TIMESTAMP"].map(e=>({label:e,kind:t.languages.CompletionItemKind.Function,insertText:`${e}()`,range:o}))]}}}),e.onKeyDown(e=>{(e.ctrlKey||e.metaKey)&&e.keyCode===t.KeyCode.Enter&&(e.preventDefault(),e.stopPropagation(),E.current&&E.current())});const n=`execute-query-${Math.random().toString(36).substr(2,9)}`;e.addAction({id:n,label:"Execute Query",keybindings:[t.KeyMod.CtrlCmd|t.KeyCode.Enter],contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:()=>{E.current&&E.current()}}),e.updateOptions({minimap:{enabled:!1},fontSize:14,lineNumbers:"on",roundedSelection:!1,scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2,wordWrap:"on",suggest:{showKeywords:!0,showSnippets:!0,showFunctions:!0}})},options:{readOnly:d,automaticLayout:!0}})})});s.displayName="CodeEditor";const i=s}}]);