"use strict";(self.webpackChunkreifydb_docs=self.webpackChunkreifydb_docs||[]).push([[7643,8401],{2153:(e,t,n)=>{n.d(t,{A:()=>i});var s=n(59729);const r={brutalistContainer:"brutalistContainer_APvi",loadingBox:"loadingBox_aZTp",loadingSpinner:"loadingSpinner_cU7F",spin:"spin_S0yu",loadingText:"loadingText_uANT",errorBox:"errorBox_CVh4",errorHeader:"errorHeader_wshI",errorLabel:"errorLabel__alV",errorMessage:"errorMessage_E7e2",emptyBox:"emptyBox_snBC",emptyText:"emptyText_zCsI",emptyHint:"emptyHint_veDV",resultHeader:"resultHeader_TJTA",statsBox:"statsBox_DGe5",statItem:"statItem_FUB2",brutalistButton:"brutalistButton_Um01",tableContainer:"tableContainer_psY8",brutalistTable:"brutalistTable_XbYV",indexHeader:"indexHeader_nZP1",columnHeader:"columnHeader_jU89",headerContent:"headerContent_OWGD",columnName:"columnName_vxjW",columnType:"columnType_Q4Da",sortArrow:"sortArrow_rbdO",dataRow:"dataRow_Yuq2",indexCell:"indexCell_kfvR",dataCell:"dataCell_ETmi",cellValue:"cellValue_Ndje",nullValue:"nullValue_dF2x",boolValue:"boolValue_CCaZ",true:"true_LAGZ",false:"false_NP6X",jsonValue:"jsonValue_ULIV","type-number":"type-number_yLB8","type-date":"type-date_kesV","type-blob":"type-blob_ykgX",noDataCell:"noDataCell_YmTR",noDataBox:"noDataBox_aMLA",noDataHint:"noDataHint_yKui"};var a=n(65813);function i({result:e,error:t,isLoading:n}){const[i,o]=(0,s.useState)(null),[c,l]=(0,s.useState)("asc"),d=(0,s.useCallback)(e=>{if(void 0===e)return"NULL";const t=e.valueOf();if(null==t)return"NULL";if(!0===t)return"TRUE";if(!1===t)return"FALSE";if("bigint"==typeof t)return t.toString();if(t instanceof Date)return t.toISOString().replace("T"," ").substring(0,19);if(t instanceof Uint8Array){const e=Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("");return"0x"+(e.length>16?e.substring(0,16)+"...":e)}return String(t)},[]),u=(0,s.useCallback)(e=>{if(void 0===e)return"null";const t=e.valueOf();if(null==t)return"null";if("boolean"==typeof t)return"boolean";if("bigint"==typeof t||"number"==typeof t)return"number";if(t instanceof Date)return"date";if(t instanceof Uint8Array)return"blob";if("string"==typeof t){if(t.startsWith("{")&&t.endsWith("}")||t.startsWith("[")&&t.endsWith("]"))try{return JSON.parse(t),"json"}catch{return"string"}return"string"}return"unknown"},[]),m=(0,s.useCallback)(e=>{i===e?l("asc"===c?"desc":"asc"):(o(e),l("asc"))},[i,c]),h=(0,s.useMemo)(()=>e&&i&&0!==e.rows.length?[...e.rows].sort((e,t)=>{const n=e[i]?.valueOf(),s=t[i]?.valueOf();if(null==n)return 1;if(null==s)return-1;let r=0;return n<s&&(r=-1),n>s&&(r=1),"asc"===c?r:-r}):e?.rows||[],[e,i,c]),x=(0,s.useCallback)(()=>{if(!e)return;const t=[e.columns.map(e=>e.name).join(","),...e.rows.map(t=>e.columns.map(e=>{const n=d(t[e.name]);return n.includes(",")?`"${n}"`:n}).join(","))].join("\n"),n=new Blob([t],{type:"text/csv"}),s=URL.createObjectURL(n),r=document.createElement("a");r.href=s,r.download=`query-results-${Date.now()}.csv`,r.click(),URL.revokeObjectURL(s)},[e,d]);return n?(0,a.jsx)("div",{className:r.brutalistContainer,children:(0,a.jsxs)("div",{className:r.loadingBox,children:[(0,a.jsx)("div",{className:r.loadingSpinner}),(0,a.jsx)("span",{className:r.loadingText,children:"EXECUTING QUERY"})]})}):t?(0,a.jsx)("div",{className:r.brutalistContainer,children:(0,a.jsxs)("div",{className:r.errorBox,children:[(0,a.jsx)("div",{className:r.errorHeader,children:(0,a.jsx)("span",{className:r.errorLabel,children:"ERROR"})}),(0,a.jsx)("pre",{className:r.errorMessage,children:t})]})}):e?(0,a.jsx)("div",{className:r.brutalistContainer,children:(0,a.jsxs)("div",{className:r.tableContainer,children:[(0,a.jsxs)("table",{className:r.brutalistTable,children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:r.indexHeader,children:"#"}),e.columns.map((e,t)=>(0,a.jsx)("th",{className:r.columnHeader,onClick:()=>m(e.name),children:(0,a.jsxs)("div",{className:r.headerContent,children:[(0,a.jsx)("span",{className:r.columnName,children:e.name}),(0,a.jsx)("span",{className:r.columnType,children:e.ty}),i===e.name&&(0,a.jsx)("span",{className:r.sortArrow,children:"asc"===c?"\u25b2":"\u25bc"})]})},t))]})}),(0,a.jsx)("tbody",{children:h.length>0?h.map((t,n)=>(0,a.jsxs)("tr",{className:r.dataRow,children:[(0,a.jsx)("td",{className:r.indexCell,children:n+1}),e.columns.map((e,n)=>{const s=t[e.name],i=d(s),o=u(s);return(0,a.jsx)("td",{className:`${r.dataCell} ${r[`type-${o}`]}`,children:"null"===o?(0,a.jsx)("span",{className:r.nullValue,children:"NULL"}):"boolean"===o?(0,a.jsx)("span",{className:`${r.boolValue} ${"TRUE"===i?r.true:r.false}`,children:i}):"json"===o?(0,a.jsx)("code",{className:r.jsonValue,children:i.length>50?i.substring(0,50)+"...":i}):(0,a.jsx)("span",{className:r.cellValue,children:i})},n)})]},n)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:e.columns.length+1,className:r.noDataCell,children:(0,a.jsxs)("div",{className:r.noDataBox,children:[(0,a.jsx)("span",{children:"QUERY EXECUTED SUCCESSFULLY"}),(0,a.jsx)("span",{className:r.noDataHint,children:"NO ROWS RETURNED"})]})})})})]}),(0,a.jsxs)("div",{className:r.resultHeader,children:[(0,a.jsxs)("div",{className:r.statsBox,children:[(0,a.jsxs)("span",{className:r.statItem,children:["ROWS: ",(0,a.jsx)("strong",{children:e.rows.length})]}),void 0!==e.rowsAffected&&(0,a.jsxs)("span",{className:r.statItem,children:["AFFECTED: ",(0,a.jsx)("strong",{children:e.rowsAffected})]})]}),(0,a.jsx)("button",{className:r.brutalistButton,onClick:x,children:"EXPORT CSV"})]})]})}):(0,a.jsx)("div",{className:r.brutalistContainer,children:(0,a.jsxs)("div",{className:r.emptyBox,children:[(0,a.jsx)("span",{className:r.emptyText,children:"NO RESULTS"}),(0,a.jsx)("span",{className:r.emptyHint,children:"EXECUTE A QUERY TO SEE RESULTS"})]})})}},46053:(e,t,n)=>{n.d(t,{A:()=>i});var s=n(59729),r=n(47982),a=n(65813);const i=e=>((0,s.useEffect)(()=>{document.body.classList.add("blog-page");document.querySelectorAll("article").forEach((e,t)=>{e.style.animationDelay=.1*t+"s",e.classList.add("blog-card-animation")});if(!document.querySelector(".blog-wrapper")){const e=document.querySelector("main");e&&e.classList.add("blog-wrapper")}return()=>{document.body.classList.remove("blog-page")}},[]),(0,a.jsx)(r.A,{...e}))},49717:(e,t,n)=>{n.d(t,{A:()=>o});var s=n(59729);const r={brutalistViewer:"brutalistViewer_S3Bh",viewerContainer:"viewerContainer_UCqT",codeContainer:"codeContainer_Qn7n",viewerLoading:"viewerLoading_hri4",loadingSpinner:"loadingSpinner_h5aW",spin:"spin_Nrvw",codeBlock:"codeBlock_N6rI"};var a=n(65813);const i=(0,s.lazy)(()=>Promise.all([n.e(1869),n.e(1050),n.e(9145)]).then(n.bind(n,73758)));function o({query:e,language:t="rql"}){const[n,o]=(0,s.useState)("brutalist-light"),c=(0,s.useRef)(null),l=(0,s.useCallback)(e=>{const t=e.split("\n").length;return Math.max(24*t+20,92)},[]),[d]=(0,s.useState)(()=>l(e));return(0,s.useEffect)(()=>{const e=()=>{const e=document.documentElement.getAttribute("data-theme");o("dark"===e?"brutalist-dark":"brutalist-light")};e();const t=new MutationObserver(e);return t.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),()=>t.disconnect()},[]),(0,a.jsx)("div",{className:r.brutalistViewer,children:(0,a.jsx)("div",{className:r.viewerContainer,children:(0,a.jsx)(s.Suspense,{fallback:(0,a.jsxs)("div",{className:r.viewerLoading,children:[(0,a.jsx)("div",{className:r.loadingSpinner}),(0,a.jsx)("span",{children:"LOADING CODE..."})]}),children:(0,a.jsx)("div",{ref:c,className:r.codeContainer,style:{height:`${d}px`,minHeight:`${d}px`,maxHeight:`${d}px`},children:(0,a.jsx)(i,{value:e,onChange:()=>{},onExecute:()=>{},language:t,theme:n,readOnly:!0})})})})})}},69865:(e,t,n)=>{n.d(t,{A:()=>o});var s=n(79548),r=n(84454),a=n(49717),i=n(73687);const o={...s.A,InlineEditor:r.A,InlineViewer:a.A,InlineCodeBlock:i.A}},71090:(e,t,n)=>{n.d(t,{R:()=>s});const s={DEFAULT_WS_URL:"ws://127.0.0.1:8090",CONNECTION:{TIMEOUT_MS:1e4,RECONNECT_INTERVAL_MS:5e3,MAX_RECONNECT_ATTEMPTS:3},QUERY:{MAX_HISTORY_SIZE:100,DEFAULT_EXECUTION_TIMEOUT:3e4},DOCKER_COMMAND:"docker run -p 127.0.0.1:8090:8090 reifydb/testcontainer",getWebSocketUrl(){if("undefined"!=typeof window){const e=window.REIFYDB_WS_URL;if(e)return e;if("localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname)return`wss://${window.location.hostname}/ws`}return this.DEFAULT_WS_URL}}},73687:(e,t,n)=>{n.d(t,{A:()=>o});var s=n(59729),r=n(84454),a=n(49717),i=n(65813);function o({query:e,defaultExpanded:t=!1,editable:n=!0,language:o="rql",forceViewer:c=!1}){const[l,d]=(0,s.useState)(!1);(0,s.useEffect)(()=>{const e=()=>{const e="ontouchstart"in window||navigator.maxTouchPoints>0,t=window.innerWidth<=768;d(e||t)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);return c||l||!n?(0,i.jsx)(a.A,{query:e,language:o}):(0,i.jsx)(r.A,{query:e,defaultExpanded:t,editable:n})}},73856:(e,t,n)=>{n.d(t,{I:()=>r});var s=n(59729);function r(e,t={}){const[n,r]=(0,s.useState)({isExecuting:!1,result:null,error:null,executionTime:null}),[a,i]=(0,s.useState)([]),o=(0,s.useRef)(null),c=(0,s.useCallback)(async n=>{if(console.log("[useQuery] Executing query:",n),console.log("[useQuery] Client available:",!!e),!e){const e="No connection to ReifyDB server";return console.error("[useQuery] No client available:",e),t.onError?.(e),null}if(!n.trim()){const e="Query cannot be empty";return t.onError?.(e),null}o.current&&o.current.abort(),o.current=new AbortController,r({isExecuting:!0,result:null,error:null,executionTime:null});const s=Date.now();try{const a=await e.query(n,null,[]),o=Date.now()-s;let c;const l=a?.[0];if(Array.isArray(l)&&l.length>0){const e=l[0],t=Object.keys(e).map(t=>{const n=e[t];return{name:t,ty:n?.type||"Utf8",data:[]}});c={columns:t,rows:l,executionTimeMs:o}}else c={columns:[],rows:[],executionTimeMs:o};if(r({isExecuting:!1,result:c,error:null,executionTime:o}),!1!==t.addToHistory){const e={id:Date.now().toString(),query:n,timestamp:Date.now(),executionTimeMs:o,success:!0};i(t=>[e,...t].slice(0,100))}return t.onSuccess?.(c),c}catch(a){const e=Date.now()-s;let o="Query execution failed";if(a instanceof Error?o=a.message:"string"==typeof a?o=a:a&&"object"==typeof a&&"message"in a&&(o=a.message),r({isExecuting:!1,result:null,error:o,executionTime:e}),!1!==t.addToHistory){const t={id:Date.now().toString(),query:n,timestamp:Date.now(),executionTimeMs:e,success:!1,error:o};i(e=>[t,...e].slice(0,100))}return t.onError?.(o),null}finally{o.current=null}},[e,t]),l=(0,s.useCallback)(()=>{r({isExecuting:!1,result:null,error:null,executionTime:null})},[]),d=(0,s.useCallback)(()=>{i([])},[]),u=(0,s.useCallback)(()=>{o.current&&(o.current.abort(),r(e=>({...e,isExecuting:!1,error:"Query cancelled"})))},[]);return{isExecuting:n.isExecuting,result:n.result,error:n.error,executionTime:n.executionTime,history:a,executeQuery:c,clearResults:l,clearHistory:d,cancelQuery:u}}},74707:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});n(59729);var s=n(53357),r=n(99377),a=n(44061),i=n(65813);function o({post:e}){const t=e.authors[0];return(0,i.jsx)("article",{className:"blog-post-card",children:(0,i.jsxs)("div",{className:"flex flex-col h-full",children:[(0,i.jsxs)("header",{children:[(0,i.jsx)("h2",{className:"blog-post-card-title",children:(0,i.jsx)(a.A,{to:e.permalink,children:e.title})}),(0,i.jsxs)("div",{className:"blog-post-card-meta",children:[(0,i.jsx)("time",{dateTime:e.date,className:"blog-post-card-date",children:e.formattedDate}),e.readingTime&&(0,i.jsxs)("span",{className:"blog-post-card-reading-time",children:[Math.ceil(e.readingTime)," MIN READ"]})]})]}),(0,i.jsx)("div",{className:"blog-post-card-description",children:e.description}),(0,i.jsxs)("footer",{className:"blog-post-card-footer",children:[(0,i.jsxs)("div",{className:"blog-post-card-author",children:[t.imageURL&&(0,i.jsx)("img",{src:t.imageURL,alt:t.name,className:"blog-post-card-author-image"}),(0,i.jsxs)("div",{className:"blog-post-card-author-info",children:[(0,i.jsx)("div",{className:"blog-post-card-author-name",children:t.name}),t.title&&(0,i.jsx)("div",{className:"blog-post-card-author-title",children:t.title})]})]}),(0,i.jsx)(a.A,{to:e.permalink,className:"blog-post-card-read-more",children:"READ MORE"})]})]})})}var c=n(76086);function l({posts:e,metadata:t}){return(0,i.jsx)(r.A,{title:t.blogTitle,description:t.blogDescription,children:(0,i.jsxs)("div",{className:"blog-list-container",children:[(0,i.jsx)(c.A,{title:"REIFYDB BLOG",subtitle:"Latest updates, technical insights, and best practices for building with ReifyDB"}),(0,i.jsx)("div",{className:"blog-list-content",children:(0,i.jsx)("div",{className:"container mx-auto px-4",children:(0,i.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map(e=>(0,i.jsx)(o,{post:e},e.id))})})})]})})}const d=e=>{if(("undefined"==typeof window||!window.location.pathname.includes("/page/"))&&e.items&&e.items.length>0){const t=e.items.map((e,t)=>({id:`post-${t}`,title:e.content.metadata.title,description:e.content.metadata.description||e.content.metadata.frontMatter.description||"",date:e.content.metadata.date,formattedDate:e.content.metadata.formattedDate||new Date(e.content.metadata.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),authors:e.content.metadata.authors||e.content.metadata.frontMatter.authors||[{name:"Anonymous"}],permalink:e.content.metadata.permalink,readingTime:e.content.metadata.readingTime,tags:e.content.metadata.tags||[]})),n={blogTitle:e.metadata?.blogTitle||"ReifyDB Blog",blogDescription:e.metadata?.blogDescription||"Stay up to date with the latest ReifyDB news, features, and best practices"};return(0,i.jsx)(l,{posts:t,metadata:n})}return(0,i.jsx)(s.A,{...e})}},76086:(e,t,n)=>{n.d(t,{A:()=>r});n(59729);var s=n(65813);function r({title:e,subtitle:t,showDivider:n=!0}){return(0,s.jsx)("div",{className:"page-header",children:(0,s.jsx)("div",{className:"container mx-auto px-6",children:(0,s.jsxs)("div",{className:"max-w-4xl",children:[(0,s.jsx)("h1",{className:"text-5xl text-white uppercase tracking-tight mb-4",children:e}),n&&(0,s.jsx)("div",{className:"h-1 w-24 bg-white mb-6"}),t&&(0,s.jsx)("p",{className:"text-xl text-white/90 font-medium",children:t})]})})})}},84454:(e,t,n)=>{n.d(t,{A:()=>u});var s=n(59729),r=n(97566),a=n(73856),i=n(71090),o=n(2153);const c={brutalistEditor:"brutalistEditor_cL4z",editorContainer:"editorContainer_YYhe",editorWrapper:"editorWrapper_nmoD",codeContainer:"codeContainer___gc",editorActions:"editorActions_VMrc",executeBtn:"executeBtn_eig7",toggleBtn:"toggleBtn_M5NM",resetBtn:"resetBtn_nvM3",shortcutHint:"shortcutHint_UqyU",connectionDot:"connectionDot_Ohfw",connected:"connected_bP1i",pulse:"pulse_xWTZ",disconnected:"disconnected_XsOD",staticEditor:"staticEditor_KoL3",codeBlock:"codeBlock_jE7X",editorLoading:"editorLoading_Suip",loadingSpinner:"loadingSpinner_aP2V",spinner:"spinner_A9Mt",spin:"spin_LQ3s",resultsWrapper:"resultsWrapper_SoPi",statementResult:"statementResult_ISl6",statementHeader:"statementHeader_ZbAY",statementNumber:"statementNumber_VTQL",statementPreview:"statementPreview_LowY",modalOverlay:"modalOverlay_zcm8",brutalistModal:"brutalistModal_ve6W",modalHeader:"modalHeader_xJV6",modalCloseBtn:"modalCloseBtn_jIsH",modalContent:"modalContent_e58t",modalError:"modalError_wIT0",modalText:"modalText_KLui",commandBox:"commandBox_kSOX",copyBtn:"copyBtn_bS8K",modalActions:"modalActions_iCGV",brutalistBtnSecondary:"brutalistBtnSecondary_Dexq",brutalistBtnPrimary:"brutalistBtnPrimary_ci_i"};var l=n(65813);const d=(0,s.lazy)(()=>Promise.all([n.e(1869),n.e(1050),n.e(1526)]).then(n.bind(n,73758)));function u({query:e,defaultExpanded:t=!1,editable:n=!0}){const[u,m]=(0,s.useState)(e),[h,x]=(0,s.useState)(t),[g,p]=(0,s.useState)([]),[b,C]=(0,s.useState)("brutalist-light"),[N,E]=(0,s.useState)(!1),[f,j]=(0,s.useState)(0),y=(0,s.useRef)(null),v=(0,s.useRef)(null),w=(0,s.useRef)(null),_=(0,s.useRef)(()=>{}),{client:T,isConnected:S,isConnecting:R,connectionError:D,connect:A,reconnect:O}=(0,r.w)(),{isExecuting:k,executeQuery:B,clearResults:L}=(0,a.I)(T,{addToHistory:!1}),U=(0,s.useCallback)(e=>{const t=e.split("\n").length,n="undefined"!=typeof window?window.innerHeight:800,s=Math.floor(.8*n);return Math.min(Math.max(24*t+20,92),s)},[]),[I,H]=(0,s.useState)(()=>{const t=e.split("\n").length;return Math.min(Math.max(24*t+20,92),640)}),M=(0,s.useCallback)(e=>{v.current&&(v.current.style.height=`${e}px`,v.current.style.minHeight=`${e}px`,v.current.style.maxHeight=`${e}px`)},[]);(0,s.useEffect)(()=>{const e=()=>{const e=document.documentElement.getAttribute("data-theme");C("dark"===e?"brutalist-dark":"brutalist-light")};e();const t=new MutationObserver(e);return t.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),()=>t.disconnect()},[]),(0,s.useEffect)(()=>{if("undefined"==typeof window)return;const e=()=>{const e=U(u);M(e),H(e)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[u,U,M]),(0,s.useEffect)(()=>{S&&N&&(E(!1),j(0),w.current&&(clearInterval(w.current),w.current=null))},[S,N]),(0,s.useEffect)(()=>{const e=e=>{"Escape"===e.key&&N&&E(!1)};if(N)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[N]),(0,s.useEffect)(()=>()=>{w.current&&clearInterval(w.current)},[]);const V=(0,s.useCallback)(()=>{R||(j(10),w.current&&clearInterval(w.current),w.current=setInterval(()=>{j(e=>e<=1?(w.current&&(clearInterval(w.current),w.current=null),0):e-1)},1e3),S?O():A())},[R,S,O,A]),W=(0,s.useCallback)(async()=>{if(!u?.trim()||k)return;if(!S)return void E(!0);x(!0),L();const e=(e=>{const t=[];let n="",s=!1,r="";for(let i=0;i<e.length;i++){const a=e[i],o=i>0?e[i-1]:"";if(s||"'"!==a&&'"'!==a)if(s&&a===r&&"\\"!==o)s=!1,n+=a;else if(s||";"!==a)n+=a;else{const e=n.trim();e&&t.push(e),n=""}else s=!0,r=a,n+=a}const a=n.trim();return a&&t.push(a),t})(u),t=[];for(const s of e)try{const e=await B(s);t.push({statement:s,result:e,error:null})}catch(n){t.push({statement:s,result:null,error:n instanceof Error?n.message:"Unknown error occurred"})}p(t)},[u,k,S,B,L,T]);(0,s.useEffect)(()=>{_.current=W},[W]);const F=(0,s.useCallback)(()=>{_.current()},[]);return(0,l.jsxs)(l.Fragment,{children:[N&&!S&&(0,l.jsx)("div",{className:c.modalOverlay,onClick:()=>E(!1),children:(0,l.jsxs)("div",{className:c.brutalistModal,onClick:e=>e.stopPropagation(),children:[(0,l.jsxs)("div",{className:c.modalHeader,children:[(0,l.jsx)("h3",{children:"NO CONNECTION"}),(0,l.jsx)("button",{className:c.modalCloseBtn,onClick:()=>E(!1),children:"\u2715"})]}),(0,l.jsxs)("div",{className:c.modalContent,children:[D&&(0,l.jsxs)("div",{className:c.modalError,children:["ERROR: ",D]}),(0,l.jsx)("p",{className:c.modalText,children:"START THE REIFYDB TEST CONTAINER TO RUN QUERIES"}),(0,l.jsxs)("div",{className:c.commandBox,children:[(0,l.jsx)("code",{children:i.R.DOCKER_COMMAND}),(0,l.jsx)("button",{className:c.copyBtn,onClick:()=>{navigator.clipboard.writeText(i.R.DOCKER_COMMAND);const e=event?.target;e&&(e.textContent="COPIED",setTimeout(()=>{e.textContent="COPY"},2e3))},children:"COPY"})]})]}),(0,l.jsxs)("div",{className:c.modalActions,children:[(0,l.jsx)("button",{className:c.brutalistBtnSecondary,onClick:()=>E(!1),children:"CANCEL"}),(0,l.jsx)("button",{className:c.brutalistBtnPrimary,onClick:V,disabled:R||f>0,children:R?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:c.spinner}),"CONNECTING..."]}):f>0?`RETRY IN ${f}S`:"TRY TO CONNECT"})]})]})}),(0,l.jsxs)("div",{className:c.brutalistEditor,children:[(0,l.jsx)("div",{className:c.editorContainer,children:n?(0,l.jsx)(s.Suspense,{fallback:(0,l.jsxs)("div",{className:c.editorLoading,children:[(0,l.jsx)("div",{className:c.loadingSpinner}),(0,l.jsx)("span",{children:"LOADING EDITOR..."})]}),children:(0,l.jsxs)("div",{className:c.editorWrapper,children:[(0,l.jsx)("div",{ref:v,className:c.codeContainer,style:{height:`${I}px`,minHeight:`${I}px`,maxHeight:`${I}px`},children:(0,l.jsx)(d,{ref:y,value:u,onChange:(0,s.useCallback)(e=>{m(e);const t=U(e);H(t),M(t)},[U,M]),onExecute:F,language:"rql",theme:b,readOnly:k})}),(0,l.jsxs)("div",{className:c.editorActions,children:[(0,l.jsx)("button",{className:c.executeBtn,onClick:W,disabled:k,children:k?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:c.spinner}),"EXECUTING..."]}):(0,l.jsx)(l.Fragment,{children:"\u25b6 RUN QUERY"})}),g.length>0&&(0,l.jsxs)("button",{className:c.toggleBtn,onClick:()=>x(!h),children:[h?"\u25bc":"\u25b6"," ",h?"HIDE":"SHOW"," RESULTS (",g.length,")"]}),n&&u!==e&&(0,l.jsx)("button",{className:c.resetBtn,onClick:()=>{m(e);const t=U(e);H(t),M(t),y.current&&y.current.setValue(e)},children:"\u21ba RESET"}),(0,l.jsx)("span",{className:c.shortcutHint,children:"CTRL+ENTER TO RUN"}),(0,l.jsx)("span",{className:`${c.connectionDot} ${S?c.connected:c.disconnected}`,children:R?"CONNECTING":S?"CONNECTED":"DISCONNECTED"})]})]})}):(0,l.jsxs)("div",{className:c.staticEditor,children:[(0,l.jsx)("pre",{className:c.codeBlock,children:(0,l.jsx)("code",{children:u})}),(0,l.jsxs)("div",{className:c.editorActions,children:[(0,l.jsx)("button",{className:c.executeBtn,onClick:W,disabled:k||!S,children:k?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:c.spinner}),"EXECUTING..."]}):(0,l.jsx)(l.Fragment,{children:"\u25b6 RUN QUERY"})}),g.length>0&&(0,l.jsxs)("button",{className:c.toggleBtn,onClick:()=>x(!h),children:[h?"\u25bc":"\u25b6"," ",h?"HIDE":"SHOW"," RESULTS (",g.length,")"]}),(0,l.jsx)("span",{className:`${c.connectionDot} ${S?c.connected:c.disconnected}`,children:R?"CONNECTING":S?"CONNECTED":"DISCONNECTED"})]})]})}),h&&g.length>0&&(0,l.jsx)("div",{className:c.resultsWrapper,children:g.map((e,t)=>((e,t)=>{const{statement:n,result:s,error:r}=e;return(0,l.jsx)("div",{children:(0,l.jsx)(o.A,{result:s||void 0,error:r||void 0,isLoading:!1})},t)})(e,t))})]})]})}},97566:(e,t,n)=>{n.d(t,{w:()=>c});var s=n(59729),r=n(73815),a=n(71090);class i{state={client:null,isConnected:!1,isConnecting:!1,connectionError:null,listeners:new Set};constructor(){}static getInstance(){return i.instance||(i.instance=new i),i.instance}async connect(e=a.R.getWebSocketUrl(),t){if(this.state.isConnected||this.state.isConnecting)console.log("[WsConnection] Already connected or connecting, skipping connection attempt");else{console.log("[WsConnection] Attempting to connect to:",e),this.updateState({isConnecting:!0,connectionError:null});try{const n=await r.Kj.connect_ws(e,{timeoutMs:1e3,...t});console.log("[WsConnection] Successfully connected to WebSocket"),this.updateState({client:n,isConnected:!0,isConnecting:!1,connectionError:null})}catch(n){const e=n instanceof Error?n.message:"Failed to connect to ReifyDB";throw console.error("[WsConnection] Connection failed:",e,n),this.updateState({client:null,isConnected:!1,isConnecting:!1,connectionError:e}),n}}}disconnect(){if(this.state.client)try{this.state.client.disconnect()}catch(e){console.error("Error disconnecting:",e)}this.updateState({client:null,isConnected:!1,isConnecting:!1,connectionError:null})}async reconnect(e,t){this.disconnect(),await this.connect(e,t)}getClient(){return this.state.client}isConnected(){return this.state.isConnected}isConnecting(){return this.state.isConnecting}getConnectionError(){return this.state.connectionError}getState(){const{listeners:e,...t}=this.state;return t}subscribe(e){return this.state.listeners.add(e),()=>{this.state.listeners.delete(e)}}updateState(e){this.state={...this.state,...e},this.state.listeners.forEach(e=>{e(this.state)})}}const o=i.getInstance();function c(){const[e,t]=(0,s.useState)(()=>o.getState());return(0,s.useEffect)(()=>{const e=o.subscribe(e=>{console.log("[useConnection] State update:",{isConnected:e.isConnected,isConnecting:e.isConnecting,connectionError:e.connectionError}),t({client:e.client,isConnected:e.isConnected,isConnecting:e.isConnecting,connectionError:e.connectionError})});return o.isConnected()||o.isConnecting()?console.log("[useConnection] Skipping auto-connect, current state:",{isConnected:o.isConnected(),isConnecting:o.isConnecting()}):(console.log("[useConnection] Initiating auto-connect..."),o.connect().catch(e=>{console.error("[useConnection] Failed to connect:",e)})),e},[]),{...e,connect:()=>o.connect(),disconnect:()=>o.disconnect(),reconnect:()=>o.reconnect()}}}}]);